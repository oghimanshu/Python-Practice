<!DOCTYPE html>
<html lang="en-GB">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Analysis with Python</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>

    <!--
    FACULTY: Himanshu Gaur
    COURSE: Data Analysis with Python - Interactive Teaching Platform
    
    ============================================================================
    DEPLOYMENT GUIDE (Universal - Requires ONLY: Internet + Browser)
    ============================================================================
    
    1. QUICK START (Recommended):
       - Open index.html in any modern web browser (Chrome, Firefox, Safari, Edge)
       - NO installation required
       - ALL content loads from CDNs (Tailwind, Chart.js, Google Fonts, Unsplash)
       - Works instantly with just internet connection
    
    2. OPTIONAL: Flask Backend for Live Grammy Data:
       - Install: pip install -r requirements_new.txt
       - Run: python grammy_server.py
       - Starts server at http://localhost:5000
       - Fetches Kaggle Grammy data via MLCroissant API
       - Frontend will auto-detect and load live data when available
       - If server unavailable, falls back to sample data (no errors)
    
    3. FEATURES:
       ‚úì Pure HTML/CSS/JS - No build tools needed
       ‚úì AMOLED Dark Mode with persistent localStorage
       ‚úì Responsive design (mobile, tablet, desktop)
       ‚úì 10+ interactive topics with Chart.js visualizations
       ‚úì Grammy Analytics capstone with real Kaggle data (optional server)
       ‚úì FAQ, Glossary, and References included
       ‚úì Smooth theme transitions (0.4s ease)
       ‚úì All CDN resources have fallbacks
    
    4. BROWSER COMPATIBILITY:
       - Chrome/Chromium (Latest)
       - Firefox (Latest)
       - Safari (Latest)
       - Edge (Latest)
       - Mobile browsers (iOS Safari, Chrome Mobile)
    
    5. DARK MODE:
       - Toggle via button in header (sun/moon icon)
       - Auto-persists to browser storage
       - Loads saved preference on startup
       - Pure AMOLED black (#000000) for OLED displays
    
    ============================================================================
    Updates:
    - NEW: "Grammy Awards Analytics" Capstone Section (Bubble Chart + Weighted Scoring).
    - NEW: AMOLED Dark Mode Toggle (Header) with persistent localStorage.
    - NEW: CSS Variables for universal theming, Dynamic Chart.js Theme updating.
    - NEW: MLCroissant integration for live Kaggle dataset access (optional server).
    - FIXED: Dark mode now works perfectly in all sections with proper text contrast.
    - FIXED: All elements respect CSS variables, not hardcoded Tailwind classes.
    - FIXED: Toggle buttons and icons always visible in both light and dark modes.
    ============================================================================
    -->

    <style>
        :root {
            /* Glass UI Variables */
            --bg-body: #f8fafc;
            /* Fallback */
            --bg-glass: rgba(255, 255, 255, 0.7);
            --bg-glass-panel: rgba(255, 255, 255, 0.6);
            --border-glass: rgba(255, 255, 255, 0.4);
            --shadow-glass: 0 8px 32px 0 rgba(31, 38, 135, 0.1);

            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-heading: #0f172a;
            --border-color: rgba(226, 232, 240, 0.6);
            --code-bg: rgba(15, 23, 42, 0.95);
            --code-text: #f1f5f9;
            --accent-color: #2563eb;
            --accent-hover: #1d4ed8;
            --chart-text: #64748b;
            --chart-grid: rgba(226, 232, 240, 0.6);
        }

        /* AMOLED Dark Mode / Glass Dark */
        .dark {
            --bg-body: #000000;
            /* Fallback */
            --bg-glass: rgba(10, 10, 10, 0.7);
            --bg-glass-panel: rgba(20, 20, 20, 0.6);
            --border-glass: rgba(255, 255, 255, 0.1);
            --shadow-glass: 0 8px 32px 0 rgba(0, 0, 0, 0.3);

            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --text-heading: #f8fafc;
            --border-color: rgba(51, 51, 51, 0.6);
            --code-bg: rgba(17, 17, 17, 0.95);
            --code-text: #e2e8f0;
            --accent-color: #3b82f6;
            --accent-hover: #60a5fa;
            --chart-text: #94a3b8;
            --chart-grid: rgba(51, 51, 51, 0.6);
        }

        /* Global Background Mesh */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background:
                radial-gradient(at 0% 0%, rgba(37, 99, 235, 0.1) 0, transparent 50%),
                radial-gradient(at 100% 0%, rgba(236, 72, 153, 0.1) 0, transparent 50%),
                radial-gradient(at 100% 100%, rgba(99, 102, 241, 0.1) 0, transparent 50%),
                radial-gradient(at 0% 100%, rgba(34, 197, 94, 0.1) 0, transparent 50%);
            background-color: #f8fafc;
            transition: background-color 0.4s ease;
        }

        .dark body::before {
            background:
                radial-gradient(at 0% 0%, rgba(37, 99, 235, 0.15) 0, transparent 50%),
                radial-gradient(at 100% 0%, rgba(236, 72, 153, 0.15) 0, transparent 50%),
                radial-gradient(at 100% 100%, rgba(99, 102, 241, 0.15) 0, transparent 50%),
                radial-gradient(at 0% 100%, rgba(34, 197, 94, 0.15) 0, transparent 50%);
            background-color: #020617;
            /* Deep slate/black */
        }

        /* Consolidated Text Color Overrides */
        .text-slate-900,
        .text-gray-900,
        .text-slate-800,
        .text-gray-800,
        .text-slate-700,
        .text-gray-700 {
            color: var(--text-heading) !important;
        }

        .text-slate-600,
        .text-gray-600,
        .text-slate-500,
        .text-gray-500,
        .text-slate-400,
        .text-gray-400 {
            color: var(--text-secondary) !important;
        }

        .text-slate-300,
        .text-gray-300,
        .text-slate-200,
        .text-gray-200,
        .text-slate-100,
        .text-gray-100,
        .text-slate-50,
        .text-gray-50 {
            color: var(--text-primary) !important;
        }

        .dark .text-slate-900,
        .dark .text-gray-900,
        .dark .text-slate-800,
        .dark .text-gray-800,
        .dark .text-slate-700,
        .dark .text-gray-700,
        .dark .text-slate-600,
        .dark .text-gray-600,
        .dark .text-slate-500,
        .dark .text-gray-500,
        .dark .text-slate-400,
        .dark .text-gray-400,
        .dark .text-slate-300,
        .dark .text-gray-300,
        .dark .text-slate-200,
        .dark .text-gray-200,
        .dark .text-slate-100,
        .dark .text-gray-100,
        .dark .text-slate-50,
        .dark .text-gray-50 {
            color: var(--text-primary) !important;
        }

        .dark .text-slate-500,
        .dark .text-gray-500,
        .dark .text-slate-400,
        .dark .text-gray-400 {
            color: var(--text-secondary) !important;
        }

        /* Custom Command Box to ensure visibility */
        .command-box {
            background-color: #0f172a !important;
            /* Slate 900 */
            color: #4ade80 !important;
            /* Green 400 */
            border: 1px solid #334155 !important;
            /* Slate 700 */
        }

        .dark .command-box {
            background-color: #020617 !important;
            /* Slate 950 */
            border-color: #1e293b !important;
            /* Slate 800 */
            color: #94a3b8 !important;
            /* Slate 400 */
        }

        /* Glass Panel Styles - iOS Style */
        .bg-white,
        .bg-slate-50,
        .bg-slate-100 {
            background-color: var(--bg-glass-panel) !important;
            backdrop-filter: saturate(180%) blur(20px);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            border: 1px solid var(--border-glass) !important;
            box-shadow: var(--shadow-glass);
        }

        .dark .bg-white,
        .dark .bg-slate-50,
        .dark .bg-slate-100 {
            background-color: var(--bg-glass-panel) !important;
            border: 1px solid var(--border-glass) !important;
        }

        .border-slate-200,
        .border-slate-100 {
            border-color: var(--border-glass) !important;
        }

        .dark .border-slate-200,
        .dark .border-slate-100 {
            border-color: var(--border-glass) !important;
        }

        /* Ensure buttons are always visible */
        .theme-toggle {
            opacity: 1 !important;
            visibility: visible !important;
            display: inline-flex !important;
            color: var(--text-primary) !important;
            stroke: currentColor !important;
        }

        .theme-toggle:hover {
            opacity: 0.8 !important;
        }

        .theme-toggle svg {
            opacity: 1 !important;
            visibility: visible !important;
            color: var(--text-primary) !important;
            stroke: var(--text-primary) !important;
        }

        .theme-toggle .sun-icon,
        .theme-toggle .moon-icon {
            display: none !important;
        }

        .theme-toggle .sun-icon.hidden,
        .theme-toggle .moon-icon.hidden {
            display: none !important;
        }

        .theme-toggle .sun-icon:not(.hidden),
        .theme-toggle .moon-icon:not(.hidden) {
            display: block !important;
        }

        /* Desktop header theme toggle */
        #desktop-theme-toggle {
            color: var(--text-primary) !important;
        }

        #desktop-theme-toggle svg {
            stroke: var(--text-primary) !important;
        }

        .dark .bg-slate-950 {
            background-color: var(--bg-glass-panel) !important;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border-glass) !important;
        }

        /* Mobile theme toggle */
        #mobile-theme-toggle {
            color: var(--text-primary) !important;
        }

        /* Sidebar Transition */
        #sidebar {
            transition: transform 0.3s ease, width 0.3s ease;
        }

        body.sidebar-collapsed #sidebar {
            transform: translateX(-100%);
        }

        @media (min-width: 768px) {
            body.sidebar-collapsed #sidebar {
                transform: translateX(-100%);
                width: 0;
            }

            body.sidebar-collapsed main {
                margin-left: 0;
                max-width: 100%;
            }

            main {
                transition: margin-left 0.3s ease, max-width 0.3s ease;
            }
        }

        #mobile-theme-toggle svg {
            stroke: var(--text-primary) !important;
        }

        /* Home hero theme toggle */
        #home-theme-toggle {
            color: white !important;
        }

        #home-theme-toggle svg {
            stroke: white !important;
        }

        /* Ensure all text is always visible */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p,
        span,
        a,
        li,
        div {
            visibility: visible !important;
            opacity: 1 !important;
        }

        /* Force all Tailwind text colors to use CSS variables instead of hardcoded values */
        * {
            transition: background-color 0.4s ease, color 0.4s ease, border-color 0.4s ease;
        }

        /* Ensure toggle buttons and icons are always responsive */
        button.theme-toggle {
            cursor: pointer;
            pointer-events: auto !important;
        }

        /* Force dark mode colors from CSS variables, not Tailwind */
        .dark h1,
        .dark h2,
        .dark h3,
        .dark h4,
        .dark h5,
        .dark h6,
        .dark p,
        .dark span,
        .dark a,
        .dark div {
            color: var(--text-primary) !important;
        }


        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            background-color: var(--bg-body);
            color: var(--text-primary);
            transition: background-color 0.4s ease, color 0.4s ease;
        }

        /* Navigation Styling */
        .nav-link {
            display: block;
            padding: 0.6rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.2s;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .nav-link:hover {
            background-color: var(--border-color);
            color: var(--text-primary);
            transform: translateX(4px);
        }

        .nav-link.active {
            background-color: var(--accent-color);
            color: white;
            font-weight: 600;
            transform: translateX(4px);
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.2);
        }

        /* Panels & Layout */
        .topic-panel {
            color: var(--text-primary);
        }

        .bg-white {
            background-color: var(--bg-panel) !important;
            transition: background-color 0.4s ease;
        }

        .bg-slate-50 {
            background-color: var(--bg-body) !important;
            transition: background-color 0.4s ease;
        }

        .border-slate-200 {
            border-color: var(--border-color) !important;
            transition: border-color 0.4s ease;
        }

        .border-r {
            border-color: var(--border-color) !important;
        }

        .border-b {
            border-color: var(--border-color) !important;
        }

        .text-slate-900 {
            color: var(--text-heading) !important;
            transition: color 0.4s ease;
        }

        .text-slate-800 {
            color: var(--text-primary) !important;
            transition: color 0.4s ease;
        }

        .text-slate-600 {
            color: var(--text-secondary) !important;
            transition: color 0.4s ease;
        }

        .text-slate-500 {
            color: var(--text-secondary) !important;
            transition: color 0.4s ease;
        }

        .text-slate-400 {
            color: var(--text-secondary) !important;
            transition: color 0.4s ease;
        }

        .text-slate-300 {
            color: var(--text-primary) !important;
            transition: color 0.4s ease;
        }

        .text-slate-200 {
            color: var(--text-primary) !important;
            transition: color 0.4s ease;
        }

        .text-slate-700 {
            color: var(--text-heading) !important;
            transition: color 0.4s ease;
        }

        /* Content Typography */
        .topic-panel h2 {
            font-size: 2.25rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: var(--text-heading) !important;
            letter-spacing: -0.025em;
            line-height: 1.2;
            visibility: visible !important;
            opacity: 1 !important;
        }

        .topic-panel h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 3rem;
            margin-bottom: 1rem;
            color: var(--text-heading) !important;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
            visibility: visible !important;
            opacity: 1 !important;
        }

        .topic-panel h4 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--text-heading) !important;
            visibility: visible !important;
            opacity: 1 !important;
        }

        .topic-panel p,
        .topic-panel li {
            font-size: 1.05rem;
            line-height: 1.75;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .topic-panel ul {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-bottom: 1.5rem;
        }

        /* Code Blocks */
        pre {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 1.25rem;
            border-radius: 0 0 0.75rem 0.75rem;
            overflow-x: auto;
            font-size: 0.875rem;
            line-height: 1.6;
            border: 1px solid var(--border-color);
            margin-bottom: 2rem;
        }

        code {
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
        }

        /* Elaborated Explanation Box */
        .code-explanation {
            background-color: rgba(37, 99, 235, 0.05);
            /* Transparent blue tint */
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--accent-color);
            border-radius: 0.75rem 0.75rem 0 0;
            padding: 1.5rem;
            margin-bottom: 0;
        }

        .code-explanation h5 {
            font-weight: 800;
            color: var(--accent-color);
            margin-bottom: 0.5rem;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 1.25rem;
        }

        .code-explanation h5:first-child {
            margin-top: 0;
        }

        .code-explanation p {
            margin-bottom: 0;
            color: var(--text-primary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Simple English Section Highlight */
        .simple-english {
            background-color: var(--bg-panel);
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            margin-bottom: 1rem;
            color: var(--accent-color);
            font-weight: 500;
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .simple-english::before {
            content: "üí°";
            font-size: 1.25rem;
            line-height: 1;
        }

        /* Practice Challenge Box */
        .practice-box {
            background-color: rgba(34, 197, 94, 0.1);
            /* Green tint */
            border: 1px dashed #16a34a;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            margin-bottom: 2rem;
        }

        .practice-box h5 {
            color: #16a34a;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .practice-box p {
            color: var(--text-primary);
        }

        /* New Syntax List Style */
        .syntax-list {
            list-style-type: disc;
            padding-left: 1.25rem;
            margin-top: 0.25rem;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .syntax-list li {
            margin-bottom: 0.4rem;
        }

        .syntax-list code {
            background-color: rgba(125, 125, 125, 0.2);
            padding: 0.1rem 0.3rem;
            border-radius: 0.2rem;
            font-weight: 700;
            color: var(--text-heading);
        }

        /* Terminal Output Simulator */
        .output-block {
            background-color: #111111;
            /* Always dark for terminal feel */
            color: #4ade80;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            padding: 1rem;
            border-radius: 0.5rem;
            border-left: 4px solid #10b981;
            margin-top: -1.5rem;
            margin-bottom: 3rem;
            font-size: 0.8rem;
            overflow-x: auto;
            white-space: pre;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
        }

        .output-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #94a3b8;
            margin-bottom: 0.5rem;
            display: block;
            font-weight: bold;
            border-bottom: 1px solid #333;
            padding-bottom: 4px;
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            width: 100%;
            margin: 2rem auto;
            height: 400px;
            background: var(--bg-panel);
            padding: 1rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
        }

        /* Copy Button */
        .copy-btn {
            background-color: var(--border-color);
            color: var(--text-primary);
            border: none;
            padding: 0.35rem 0.75rem;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: background-color 0.2s;
            float: right;
            margin-top: -2.5rem;
            margin-right: 0.5rem;
            z-index: 10;
            position: relative;
        }

        .copy-btn:hover {
            background-color: var(--accent-color);
            color: white;
        }

        /* Home Page Hero */
        .hero-bg {
            background: linear-gradient(rgba(15, 23, 42, 0.6), rgba(15, 23, 42, 0.6)), url('https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
        }

        /* FAQ Styles */
        details>summary {
            list-style: none;
            color: var(--text-heading);
        }

        details>summary::-webkit-details-marker {
            display: none;
        }

        /* Next Button Styling */
        .next-btn-container {
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            width: 100%;
        }

        .prev-btn,
        .next-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--accent-color);
            font-weight: 700;
            font-size: 1rem;
            transition: all 0.2s;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
        }

        .prev-btn:hover,
        .next-btn:hover {
            background-color: rgba(37, 99, 235, 0.1);
            transform: translateY(-2px);
        }

        /* Progress Bar - Apple Glass UI */
        .progress-pill-container {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            /* iOS Light Mode Glass - More Translucent */
            background: rgba(255, 255, 255, 0.45);
            backdrop-filter: saturate(180%) blur(30px);
            -webkit-backdrop-filter: saturate(180%) blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.4s cubic-bezier(0.32, 0.72, 0, 1);
            opacity: 0;
            pointer-events: none;
            visibility: hidden;
            /* Ensure it's fully hidden from screen readers/clicks when opacity is 0 */
        }

        .dark .progress-pill-container {
            /* iOS Dark Mode Glass - More Translucent */
            background: rgba(20, 20, 20, 0.45);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .progress-pill-container.visible {
            opacity: 1;
            pointer-events: auto;
            visibility: visible;
            bottom: 2.5rem;
        }

        .prog-btn {
            background: rgba(0, 0, 0, 0.05);
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-color);
        }

        .dark .prog-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .prog-btn:hover {
            background: rgba(0, 0, 0, 0.1);
            transform: scale(1.1);
        }

        .dark .prog-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .prog-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none;
        }

        .progress-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }

        .progress-text {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-color);
            white-space: nowrap;
        }

        .progress-track {
            width: 150px;
            height: 6px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 999px;
            overflow: hidden;
        }

        .dark .progress-track {
            background: rgba(255, 255, 255, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            width: 0%;
            border-radius: 999px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Dark Mode Toggle */
        .theme-toggle {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            color: var(--text-primary);
            transition: background 0.2s;
        }

        .theme-toggle:hover {
            background: var(--border-color);
        }

        /* Mobile Sidebar Toggle */
        @media (max-width: 768px) {
            #sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
                position: fixed;
                top: 0;
                left: 0;
                height: 100%;
                z-index: 50;
                background-color: var(--bg-sidebar);
            }

            #sidebar.open {
                transform: translateX(0);
            }

            #overlay.open {
                display: block;
            }
        }
    </style>
</head>

<body class="text-slate-800 dark:text-slate-200">

    <!-- Mobile Header -->
    <div
        class="md:hidden fixed top-0 left-0 right-0 z-40 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 px-4 py-3 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <button id="mobile-menu-btn" class="text-slate-600 dark:text-slate-400 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16">
                    </path>
                </svg>
            </button>
            <a href="#" onclick="switchTopic('home')"
                class="font-bold text-blue-600 dark:text-blue-400 text-lg hover:text-blue-800 dark:hover:text-blue-300">Data
                Analysis</a>
        </div>
        <div class="flex items-center gap-2">
            <div class="text-sm text-slate-600 dark:text-slate-400"><strong>Himanshu Gaur</strong></div>
            <button id="mobile-theme-toggle" class="theme-toggle" aria-label="Toggle Dark Mode">
                <svg class="w-5 h-5 sun-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                    </path>
                </svg>
                <svg class="w-5 h-5 moon-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                    </path>
                </svg>
            </button>
            </button>
        </div>
    </div>

    <!-- Desktop Sidebar Toggle Button (Floating) -->
    <button id="sidebar-toggle-btn"
        class="hidden md:flex fixed top-4 left-4 z-[100] p-2 bg-white/60 dark:bg-slate-900/60 backdrop-blur-xl border border-white/20 dark:border-white/10 rounded-lg shadow-sm text-slate-500 hover:text-slate-900 dark:hover:text-white transition-all hover:scale-105"
        aria-label="Toggle Sidebar">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
    </button>

    <div class="flex flex-col md:flex-row h-screen overflow-hidden">

        <!-- Overlay for mobile -->
        <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden"></div>

        <!-- Sidebar Navigation -->
        <nav id="sidebar"
            class="w-64 md:w-1/5 h-full bg-white dark:bg-slate-950 border-r border-slate-200 dark:border-slate-800 px-6 pb-6 pt-16 flex flex-col overflow-y-auto z-50 shadow-lg md:static md:translate-x-0">
            <div class="flex justify-between items-center mb-8">
                <a href="#" id="home-link" class="block group">
                    <h1
                        class="text-xl font-extrabold text-blue-600 dark:text-blue-400 group-hover:text-blue-800 dark:group-hover:text-blue-300 transition-colors tracking-tight">
                        Data Analysis<br>with Python</h1>
                </a>
                <button id="close-menu"
                    class="md:hidden text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-400">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>

            <div class="space-y-6 flex-grow">
                <div>
                    <h3 class="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-3">
                        Module 1: Principles</h3>
                    <ul class="space-y-1">
                        <li><a href="#" class="nav-link" data-topic="topic1">Topic 1: Data Ingestion</a></li>
                        <li><a href="#" class="nav-link" data-topic="topic2">Topic 2: NumPy Ops</a></li>
                        <li><a href="#" class="nav-link" data-topic="topic3">Topic 3: Advanced Slicing</a></li>
                        <li><a href="#" class="nav-link" data-topic="topic4">Topic 4: Array Metadata</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-3">
                        Module 2: Aggregation</h3>
                    <ul class="space-y-1">
                        <li><a href="#" class="nav-link" data-topic="topic5">Topic 5: DataFrames</a></li>
                        <li><a href="#" class="nav-link" data-topic="topic6">Topic 6: Basic GroupBy</a></li>
                        <li><a href="#" class="nav-link" data-topic="topic7">Topic 7: Multi-Aggregation</a></li>
                        <li><a href="#" class="nav-link" data-topic="merging">Topic 7b: Merging Data</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-3">
                        Module 3: Analysis</h3>
                    <ul class="space-y-1">
                        <li><a href="#" class="nav-link" data-topic="topic8">Topic 8: Data Integrity</a></li>
                        <li><a href="#" class="nav-link" data-topic="topic9">Topic 9: WEO Case Study</a></li>
                        <li><a href="#" class="nav-link" data-topic="topic10">Topic 10: Trade Case Study</a></li>
                    </ul>
                </div>

                <!-- Module 4 -->
                <div>
                    <h3 class="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-3">
                        Module 4: Advanced</h3>
                    <ul class="space-y-1">
                        <li><a href="#" class="nav-link" data-topic="viz">Advanced Visualisation</a></li>
                        <li><a href="#" class="nav-link" data-topic="kendrick">Data Storytelling: Kendrick</a></li>
                        <li><a href="#" class="nav-link" data-topic="grammy">Capstone: Grammy Analytics</a></li>
                        <li><a href="#" class="nav-link" data-topic="govdata">Real-World Pipelines</a></li>
                        <li><a href="#" class="nav-link" data-topic="learning">Further Learning</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-3">
                        Resources</h3>
                    <ul class="space-y-1">
                        <li><a href="#" class="nav-link" data-topic="faq">‚ùì FAQ</a></li>
                        <li><a href="#" class="nav-link" data-topic="glossary">üìö Glossary</a></li>
                        <li><a href="#" class="nav-link" data-topic="references">üìÑ References</a></li>
                    </ul>
                </div>

            </div>

            <div
                class="mt-auto pt-6 border-t border-slate-100 dark:border-slate-800 text-xs text-slate-500 dark:text-slate-400 flex flex-col items-center gap-2">
                <span>&copy; 2025 Himanshu Gaur</span>
                <div class="flex items-center gap-3">
                    <a href="https://github.com/oghimanshu" target="_blank"
                        class="text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors"
                        aria-label="GitHub">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd"
                                d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                                clip-rule="evenodd" />
                        </svg>
                    </a>
                    <a href="https://www.linkedin.com/in/thisishimanshu" target="_blank"
                        class="text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
                        aria-label="LinkedIn">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path
                                d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                        </svg>
                    </a>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main id="main-content" class="w-full md:w-4/5 h-full overflow-y-auto bg-slate-50">

            <!-- Floating Header -->
            <header id="main-header"
                class="hidden sticky top-0 z-30 bg-white dark:bg-slate-950 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 px-8 py-4 shadow-sm transition-all">
                <div class="flex justify-between items-center w-full">
                    <div class="cursor-pointer" onclick="switchTopic('home')">
                        <h1 class="text-lg md:text-xl font-bold text-slate-900 dark:text-slate-50">Data Analysis with
                            Python</h1>
                        <p class="text-sm text-slate-600 dark:text-slate-400 font-medium">Himanshu Gaur</p>
                    </div>
                    <div class="flex items-center gap-4">
                        <button id="desktop-theme-toggle"
                            class="theme-toggle text-slate-900 dark:text-slate-100 hover:opacity-80 transition-opacity"
                            aria-label="Toggle Dark Mode">
                            <svg class="w-5 h-5 sun-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                                </path>
                            </svg>
                            <svg class="w-5 h-5 moon-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                                </path>
                            </svg>
                        </button>
                        <button id="back-to-top"
                            class="text-sm text-blue-600 dark:text-blue-400 font-semibold hover:text-blue-800 dark:hover:text-blue-300 flex items-center gap-1 transition-colors">
                            Back to Top &uarr;
                        </button>
                    </div>
                </div>
            </header>

            <div class="p-6 md:p-8 lg:p-16 max-w-5xl mx-auto">

                <!-- HOME PAGE PANEL -->
                <div id="home" class="topic-panel">
                    <!-- Hero Section -->
                    <div
                        class="hero-bg rounded-3xl p-8 md:p-12 text-white shadow-2xl mb-16 relative overflow-hidden flex items-center min-h-[400px]">
                        <div class="absolute top-6 right-6 z-20">
                            <button id="home-theme-toggle"
                                class="theme-toggle bg-white/20 hover:bg-white/30 text-white rounded-full p-3 backdrop-blur-sm transition-all"
                                aria-label="Toggle Dark Mode">
                                <svg class="w-6 h-6 sun-icon hidden" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                                    </path>
                                </svg>
                                <svg class="w-6 h-6 moon-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                                    </path>
                                </svg>
                            </button>
                        </div>
                        <div class="relative z-10 w-full md:w-2/3 lg:w-1/2">
                            <!-- Opaque Box -->
                            <div class="bg-white/90 dark:bg-slate-900/90 backdrop-blur-md p-8 rounded-2xl shadow-xl"
                                style="color: var(--text-primary);">
                                <h1 class="text-3xl md:text-5xl font-extrabold mb-4 leading-tight tracking-tight"
                                    style="color: var(--text-heading);">Data Analysis with Python</h1>
                                <p class="text-lg mb-6" style="color: var(--text-secondary);"><span class="font-bold"
                                        style="color: var(--text-heading);">Himanshu Gaur</span></p>
                                <button id="get-started-btn"
                                    class="w-full bg-blue-600 dark:bg-blue-500 text-white hover:bg-blue-700 dark:hover:bg-blue-600 font-bold py-3 px-6 rounded-xl shadow-lg transition-all text-center">
                                    Start Learning &rarr;
                                </button>
                                <a href="https://github.com/oghimanshu/Data-Analysis-with-Python" target="_blank"
                                    class="mt-4 w-full flex items-center justify-center gap-2 bg-slate-800 dark:bg-slate-700 text-white hover:bg-slate-700 dark:hover:bg-slate-600 font-bold py-3 px-6 rounded-xl shadow-lg transition-all text-center border border-slate-700 dark:border-slate-600 group">
                                    <svg class="w-5 h-5 text-slate-400 group-hover:text-white transition-colors"
                                        fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                        <path fill-rule="evenodd"
                                            d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                                            clip-rule="evenodd" />
                                    </svg>
                                    View on GitHub
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Prerequisites Section -->
                    <div
                        class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-sm p-8 mb-16">
                        <h3 class="text-2xl font-bold mb-6 flex items-center mt-0 border-none pb-0"
                            style="color: var(--text-heading);">
                            <span
                                class="bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 p-2 rounded-lg mr-3 text-xl">üõ†Ô∏è</span>
                            Setup & Prerequisites
                        </h3>
                        <div class="grid md:grid-cols-2 gap-8">
                            <div
                                class="bg-slate-50 dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700">
                                <h4 class="font-bold text-lg mb-2 mt-0" style="color: var(--text-heading);">1. Anaconda
                                    Distribution</h4>
                                <p class="text-sm mb-4" style="color: var(--text-secondary);">You need an environment
                                    that contains Python, pandas, and numpy pre-installed. Anaconda is the industry
                                    standard for Data Science.</p>
                                <a href="https://www.anaconda.com/download" target="_blank"
                                    class="inline-block w-full text-center bg-slate-900 dark:bg-slate-700 hover:bg-slate-800 dark:hover:bg-slate-600 text-white font-bold py-2 px-4 rounded-lg transition-colors mb-4 text-sm">Download
                                    Anaconda</a>
                                <div
                                    class="bg-white dark:bg-slate-900 p-3 rounded border border-slate-200 dark:border-slate-700">
                                    <p class="text-xs font-mono mb-1" style="color: var(--text-secondary);">Recommended:
                                        Update all packages</p>
                                    <code
                                        class="text-xs text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-1 py-0.5 rounded block">conda update --all</code>
                                </div>
                            </div>
                            <div
                                class="bg-slate-50 dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700">
                                <h4 class="font-bold text-lg mb-2 mt-0" style="color: var(--text-heading);">2. Jupyter
                                    Notebook</h4>
                                <p class="text-sm mb-4" style="color: var(--text-secondary);">This acts as our "Digital
                                    Lab Notebook". It allows us to mix code, output, charts, and text explanations in a
                                    single document.</p>
                                <ul class="text-sm space-y-2" style="color: var(--text-secondary);">
                                    <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> Launch via
                                        Anaconda Navigator</li>
                                    <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> Or run
                                        <code
                                            class="text-xs bg-slate-200 dark:bg-slate-700 px-1 rounded ml-1">jupyter notebook</code>
                                        in CMD
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Course Overview -->
                    <div class="grid md:grid-cols-3 gap-8 mb-12">
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800">
                            <div
                                class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold mb-4">
                                1</div>
                            <h4 class="text-lg font-bold mb-2 mt-0" style="color: var(--text-heading);">Ingestion</h4>
                            <p class="text-sm" style="color: var(--text-secondary);">Import raw economic data from CSVs,
                                Excel, JSON, and Web APIs.</p>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800">
                            <div
                                class="w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold mb-4">
                                2</div>
                            <h4 class="text-lg font-bold mb-2 mt-0" style="color: var(--text-heading);">Analysis</h4>
                            <p class="text-sm" style="color: var(--text-secondary);">Apply Split-Apply-Combine to
                                aggregate insights and detect outliers.</p>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800">
                            <div
                                class="w-10 h-10 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center text-emerald-600 dark:text-emerald-400 font-bold mb-4">
                                3</div>
                            <h4 class="text-lg font-bold mb-2 mt-0" style="color: var(--text-heading);">Visualisation
                            </h4>
                            <p class="text-sm" style="color: var(--text-secondary);">Create complex charts for GDP,
                                Inflation, and Global Trade.</p>
                        </div>
                    </div>
                </div>

                <!-- Topic 1 -->
                <div id="topic1" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=1200&q=80"
                        alt="Ingestion" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2 class="text-slate-900 dark:text-slate-50">Topic 1: Data Ingestion from Diverse Formats</h2>

                    <h3>Theoretical Framework</h3>
                    <p>Economic data is rarely clean. It comes in legacy formats (fixed-width text), spreadsheets
                        (Excel), or modern web standards (JSON). The first step in analysis is parsing this byte-stream
                        into a structured DataFrame. Without proper ingestion, analysis is impossible.</p>

                    <h3>Code Implementation</h3>

                    <h4>Part A: Reading Indian Census Data (Text Files)</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Real government data often uses different separators (like pipes
                            `|`) instead of commas to avoid errors when fields themselves contain commas (e.g., "Mumbai,
                            Maharashtra"). Using a custom separator is crucial for preventing column misalignment.</div>
                        <h5>Conceptual Goal</h5>
                        <p>To ingest demographic data containing non-standard delimiters.</p>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>pd.read_csv()</code>: The Swiss-Army knife for reading text files. It can handle
                                local files or URLs.</li>
                            <li><code>sep='|'</code>: Explicitly overrides the default comma separator. If this is
                                wrong, Python will read the whole line as one column.</li>
                            <li><code>StringIO</code>: Simulates a file on disk using a string variable (useful for
                                testing without real files).</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import pandas as pd
from io import StringIO
import json

# Simulating a pipe-separated (|) file
census_data = """State|Population_Millions|Literacy_Rate
Maharashtra|112.4|82.3
Uttar Pradesh|199.8|67.7
Kerala|33.4|94.0
Bihar|104.1|61.8"""

# Reading the string as if it were a file
df_census = pd.read_csv(StringIO(census_data), sep='|')
print("--- Text File Ingestion ---")
print(df_census)</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>--- Text File Ingestion
                        ---
                        State Population_Millions Literacy_Rate
                        0 Maharashtra 112.4 82.3
                        1 Uttar Pradesh 199.8 67.7
                        2 Kerala 33.4 94.0
                        3 Bihar 104.1 61.8</div>

                    <h4>Part B: Reading JSON Data (API Format)</h4>
                    <div class="code-explanation">
                        <div class="simple-english">JSON (JavaScript Object Notation) is the language of the modern web.
                            Most economic APIs (like World Bank or RBI) return data in this nested key-value format
                            because it is lightweight and flexible.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>json.loads()</code>: Parses a JSON string into a Python dictionary. Essential for
                                handling API responses.</li>
                            <li><code>pd.DataFrame.from_dict()</code>: Converts a dictionary into a tabular DataFrame.
                                It infers columns from keys.</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code># Simulating a JSON response from an API
json_str = '{"Country": {"0": "India", "1": "USA"}, "GDP_Trillion": {"0": 3.7, "1": 23.0}}'

# Ingesting JSON
data_dict = json.loads(json_str)
df_json = pd.DataFrame.from_dict(data_dict)

print("--- JSON API Ingestion ---")
print(df_json)</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>--- JSON API Ingestion
                        ---
                        Country GDP_Trillion
                        0 India 3.7
                        1 USA 23.0</div>

                    <div class="practice-box">
                        <h5>üöÄ Topic 1 Challenge</h5>
                        <p class="text-sm">Try creating a CSV file named <code>my_data.csv</code> with headers
                            "Date,Price" and values "2023-01-01,500". Then read it back using
                            <code>pd.read_csv('my_data.csv')</code>.
                        </p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('home')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Home
                        </button>
                        <button onclick="switchTopic('topic2')" class="next-btn">
                            Next: Topic 2
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Topic 2 -->
                <div id="topic2" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1635070041078-e363dbe005cb?auto=format&fit=crop&w=1200&q=80"
                        alt="NumPy" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Topic 2: NumPy Arithmetic Operations</h2>

                    <h3>Theoretical Framework</h3>
                    <p><strong>Vectorization</strong> is the process of applying mathematical operations to an entire
                        array at once, rather than looping through individual elements. This utilizes <strong>SIMD
                            (Single Instruction, Multiple Data)</strong> processor features, making calculations
                        millions of times faster for large datasets.</p>

                    <h3>Code Implementation</h3>

                    <h4>Part A: Real vs Nominal GDP (Vectorization)</h4>
                    <div class="code-explanation">
                        <div class="simple-english">We calculate Real GDP for multiple states at once by removing
                            inflation effects instantly. If we used a loop, this would take much longer for large
                            datasets.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>np.array()</code>: Creates high-performance contiguous memory arrays. Unlike
                                lists, these must contain a single data type (e.g., all floats).</li>
                            <li><code>* 100</code>: <strong>Broadcasting</strong>. The scalar 100 is "stretched" to
                                match the shape of the array for multiplication.</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import numpy as np

# Nominal GDP for 3 States (in Lakh Crores)
nominal_gdp = np.array([20.5, 15.2, 8.9]) 

# GDP Deflator (Base 100)
deflator = np.array([120, 115, 110])

# Calculate Real GDP
real_gdp = (nominal_gdp / deflator) * 100

print(f"Nominal GDP: {nominal_gdp}")
print(f"Real GDP:    {np.round(real_gdp, 2)}")</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>Nominal GDP: [20.5 15.2
                        8.9]
                        Real GDP: [17.08 13.22 8.09]</div>

                    <h4>Part B: Logic Masks (Filtering)</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Filtering data without IF statements. We create a "mask" of
                            True/False values to select data. This is fundamental for extracting specific demographic
                            segments (e.g., "Households earning > 50k").</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>arr > 20</code>: Creates a boolean array (e.g., [True, False, True]).</li>
                            <li><code>arr[mask]</code>: Selects only elements where mask is True.</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>incomes = np.array([50000, 120000, 45000, 80000])

# Who earns more than 60k?
high_earners = incomes[incomes > 60000]

print(f"High Income Segments: {high_earners}")</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>High Income Segments:
                        [120000 80000]</div>

                    <div class="practice-box">
                        <h5>üöÄ Topic 2 Challenge</h5>
                        <p class="text-sm">Create two arrays: <code>Year1_Rev = np.array([100, 200])</code> and
                            <code>Year2_Rev = np.array([110, 250])</code>. Calculate the percentage growth array:
                            <code>((Year2 - Year1) / Year1) * 100</code>.
                        </p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('topic1')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Topic 1
                        </button>
                        <button onclick="switchTopic('topic3')" class="next-btn">
                            Next: Topic 3
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Topic 3 -->
                <div id="topic3" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1509228468518-180dd4864904?auto=format&fit=crop&w=1200&q=80"
                        alt="Slicing" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Topic 3: Advanced Slicing</h2>

                    <h3>Theoretical Framework</h3>
                    <p>Slicing allows us to view specific subsets of data without copying memory. This is done by
                        manipulating <strong>Memory Strides</strong>. This is critical for time-series analysis (e.g.,
                        comparing Q1 vs Q4 performance). Efficient slicing prevents memory overload when working with
                        massive economic datasets.</p>

                    <h4>NIFTY 50 Market Analysis</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Extracting the first and last week of trading data to compare
                            trends. We perform a "start-to-end" check without needing to loop through the days in
                            between.</div>
                        <h5>Conceptual Goal</h5>
                        <p>To extract specific subsets (time periods) using index slicing.</p>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>linspace(start, stop, num)</code>: Generates evenly spaced numbers. Useful for
                                creating dummy time-series data.</li>
                            <li><code>[:5]</code>: Start to index 5 (exclusive). Grabs the first 5 elements.</li>
                            <li><code>[-5:]</code>: Index -5 (5th from end) to the end. Grabs the last 5 elements.</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import numpy as np

# Simulated NIFTY 50 prices (20 days)
prices = np.linspace(19000, 20000, 20)

print(f"First Week: {np.round(prices[:5], 0)}")
print(f"Last Week:  {np.round(prices[-5:], 0)}")
print(f"Net Growth: {np.round(prices[-1] - prices[0], 0)}")</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>First Week: [19000.
                        19053. 19105. 19158. 19211.]
                        Last Week: [19789. 19842. 19895. 19947. 20000.]
                        Net Growth: 1000.0</div>

                    <div class="practice-box">
                        <h5>üöÄ Topic 3 Challenge</h5>
                        <p class="text-sm">Given an array of 12 months: <code>months = np.arange(1, 13)</code>. Extract
                            the second quarter (April, May, June) using slicing logic <code>months[3:6]</code>.</p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('topic2')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Topic 2
                        </button>
                        <button onclick="switchTopic('topic4')" class="next-btn">
                            Next: Topic 4
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Topic 4 -->
                <div id="topic4" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&w=1200&q=80"
                        alt="Metadata" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Topic 4: Array Metadata & Memory</h2>

                    <h3>Theoretical Framework</h3>
                    <p>Understanding metadata is vital for optimization. A 64-bit float takes twice as much RAM as a
                        32-bit float. Knowing the <code>shape</code> and <code>dtype</code> prevents dimension mismatch
                        errors in linear algebra (e.g., you cannot multiply a 3x3 matrix by a 2x2 matrix).</p>

                    <h4>Inspecting & Optimising Memory</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Checking the dimensions and memory usage. By reducing precision from
                            64-bit to 32-bit, we can halve the memory usage, which is critical when analyzing Big Data
                            (e.g., Census records).</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>.shape</code>: Returns (Rows, Columns). Always check this before merging data.
                            </li>
                            <li><code>.astype('float32')</code>: Converts data types to save memory (e.g., from 64-bit
                                to 32-bit).</li>
                            <li><code>.nbytes</code>: Exact memory consumed in bytes.</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import numpy as np

# A matrix of 3 Sectors across 4 Quarters (Standard Float64)
data = np.zeros((3, 4))

print(f"Initial Memory: {data.nbytes} bytes")

# Optimisation: Convert to Float32
data_optimized = data.astype('float32')
print(f"Optimised Memory: {data_optimized.nbytes} bytes")</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>Initial Memory: 96 bytes
                        Optimised Memory: 48 bytes</div>

                    <div class="practice-box">
                        <h5>üöÄ Topic 4 Challenge</h5>
                        <p class="text-sm">Create a 1D array of 12 elements using <code>np.arange(12)</code>. Then use
                            <code>.reshape(3, 4)</code> to change it into a 3-row, 4-column matrix. Print its new shape.
                        </p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('topic3')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Topic 3
                        </button>
                        <button onclick="switchTopic('topic5')" class="next-btn">
                            Next: Topic 5
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Topic 5 -->
                <div id="topic5" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1590283603385-17ffb3a7f29f?auto=format&fit=crop&w=1200&q=80"
                        alt="DataFrames" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Topic 5: DataFrames</h2>

                    <h3>Theoretical Framework</h3>
                    <p>The <strong>DataFrame</strong> is the core of pandas. Before analysis, we must "audit" the data
                        using summary statistics to check for sanity (e.g., ensuring no negative prices exist) and to
                        understand the distribution (mean vs median).</p>

                    <h4>Indian Startup Ecosystem Audit</h4>
                    <div class="code-explanation">
                        <div class="simple-english">We build a table of unicorn startups and immediately run a
                            statistical check to see the "Average Valuation" and spread. This helps investors spot
                            anomalies.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>.describe()</code>: Generates summary stats (Count, Mean, Min, Max). The first
                                command you should run on any new dataset.</li>
                            <li><code>.info()</code>: Shows data types and non-null counts. Essential for finding
                                missing values.</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import pandas as pd

data = [
    ['Flipkart', 'Bengaluru', 37.6],
    ['Paytm', 'Noida', 16.0],
    ['Ola', 'Bengaluru', 7.3],
    ['Zomato', 'Gurugram', 12.0],
    ['Swiggy', 'Bengaluru', 10.7]
]

df = pd.DataFrame(data, columns=['Name', 'City', 'Valuation_B'])

print("--- Statistical Summary ---")
print(df.describe())

print("\n--- Mega Unicorns (> $15B) ---")
print(df[df['Valuation_B'] > 15.0])</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>--- Statistical Summary
                        ---
                        Valuation_B
                        count 5.000000
                        mean 16.720000
                        std 12.091195
                        min 7.300000
                        25% 10.700000
                        50% 12.000000
                        75% 16.000000
                        max 37.600000

                        --- Mega Unicorns (> $15B) ---
                        Name City Valuation_B
                        0 Flipkart Bengaluru 37.6
                        1 Paytm Noida 16.0</div>

                    <div class="practice-box">
                        <h5>üöÄ Topic 5 Challenge</h5>
                        <p class="text-sm">Add a new column called 'Valuation_INR' by multiplying 'Valuation_B' by 83.
                            Then use <code>.head()</code> to view the result.</p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('topic4')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Topic 4
                        </button>
                        <button onclick="switchTopic('topic6')" class="next-btn">
                            Next: Topic 6
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Topic 6 -->
                <div id="topic6" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1500937386664-56d1dfef3854?auto=format&fit=crop&w=1200&q=80"
                        alt="Agriculture" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Topic 6: Basic GroupBy</h2>

                    <h3>Theoretical Framework</h3>
                    <p>The <strong>Split-Apply-Combine</strong> strategy is fundamental.
                        1. <strong>Split</strong> data into groups based on keys (e.g., 'Crop').
                        2. <strong>Apply</strong> a function to each group (e.g., 'Mean').
                        3. <strong>Combine</strong> results into a new table.
                        This allows for rapid comparative analysis between categories.</p>

                    <h4>Indian Agriculture Yield Analysis</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Grouping farms by crop type to find which one produces more food per
                            acre on average. This helps policymakers decide which crops to subsidize.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>groupby('Crop')</code>: Splits data into hidden buckets based on unique values in
                                'Crop'.</li>
                            <li><code>['Yield']</code>: Selects the column to do math on.</li>
                            <li><code>.mean()</code>: The aggregation function. Can also be sum, max, min, or count.
                            </li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import pandas as pd

agri_data = {
    'State': ['Punjab', 'Punjab', 'Haryana', 'Haryana'],
    'Crop': ['Wheat', 'Rice', 'Wheat', 'Rice'],
    'Yield_Kg_Ha': [5000, 4000, 4800, 3900]
}
df = pd.DataFrame(agri_data)

print("--- Average Yield by Crop ---")
print(df.groupby('Crop')['Yield_Kg_Ha'].mean())</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>--- Average Yield by Crop
                        ---
                        Crop
                        Rice 3950.0
                        Wheat 4900.0
                        Name: Yield_Kg_Ha, dtype: float64</div>

                    <div class="practice-box">
                        <h5>üöÄ Topic 6 Challenge</h5>
                        <p class="text-sm">Group the data by 'State' instead of 'Crop' and calculate the
                            <code>sum()</code> of Yield to see which state produces more total food in this sample.
                        </p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('topic5')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Topic 5
                        </button>
                        <button onclick="switchTopic('topic7')" class="next-btn">
                            Next: Topic 7
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Topic 7 -->
                <div id="topic7" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1543286386-2e659306cd6c?auto=format&fit=crop&w=1200&q=80"
                        alt="Complex Data" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Topic 7: Multi-Aggregation</h2>

                    <h3>Theoretical Framework</h3>
                    <p>Often we need different summaries for different variables. For Income, we want the Average. For
                        Literacy Rate, we might want the Maximum to see the best performing zone. Pandas allows passing
                        a dictionary of rules to achieve this in a single pass.</p>

                    <h4>Regional Economic Profiling</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Calculating average income AND maximum literacy for each district
                            simultaneously. This creates a multi-dimensional profile of each region.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>.agg({...})</code>: Dictionary mapping columns to specific functions. Key is
                                column name, Value is function name.</li>
                            <li><code>'mean'</code>, <code>'max'</code>: Standard statistical strings. Can also pass
                                custom functions like <code>np.median</code>.</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import pandas as pd

data = {
    'District': ['Mumbai', 'Pune', 'Mumbai', 'Pune'],
    'Income': [85000, 70000, 88000, 72000],
    'Literacy': [90, 88, 91, 89]
}
df = pd.DataFrame(data)

# Complex Aggregation Rules
rules = {
    'Income': 'mean', 
    'Literacy': 'max'
}

print(df.groupby('District').agg(rules))</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span> Income Literacy
                        District
                        Mumbai 86500.0 91
                        Pune 71000.0 89</div>

                    <div class="practice-box">
                        <h5>üöÄ Topic 7 Challenge</h5>
                        <p class="text-sm">Modify the rules dictionary to calculate the <code>'std'</code> (Standard
                            Deviation) of Income. This measures inequality within the district.</p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('topic6')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Topic 6
                        </button>
                        <button onclick="switchTopic('merging')" class="next-btn">
                            Next: Topic 7b
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Topic 7b: Merging -->
                <div id="merging" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1556761175-5973dc0f32e7?auto=format&fit=crop&w=1200&q=80"
                        alt="Merging" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Topic 7b: Merging DataFrames</h2>

                    <h3>Theoretical Framework</h3>
                    <p>In economics, data often lives in separate tables (e.g., GDP data in one file, Population data in
                        another). <strong>Merging</strong> (or Joining) is the process of combining these tables based
                        on a common key (like 'Country' or 'Year'). This corresponds to SQL JOINS.</p>

                    <h4>Joining GDP and Population Data</h4>
                    <div class="code-explanation">
                        <div class="simple-english">We have two separate lists. One has GDP, the other has Population.
                            We use the 'Country' name to glue them together into one table so we can calculate GDP per
                            Capita.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>pd.merge(left, right, on='Key')</code>: The standard join function.</li>
                            <li><code>how='inner'</code>: Only keeps rows that exist in BOTH tables (Intersection). Use
                                'outer' to keep everything (Union).</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code># Table 1: GDP
df_gdp = pd.DataFrame({
    'Country': ['India', 'USA', 'China'],
    'GDP': [3.5, 23.0, 18.0]
})

# Table 2: Population
df_pop = pd.DataFrame({
    'Country': ['India', 'USA', 'Japan'],
    'Pop': [1.4, 0.33, 0.12]
})

# Merge (Inner Join - China and Japan will be dropped as they don't match)
df_merged = pd.merge(df_gdp, df_pop, on='Country', how='inner')

print(df_merged)</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span> Country GDP Pop
                        0 India 3.5 1.40
                        1 USA 23.0 0.33</div>

                    <div class="practice-box">
                        <h5>üöÄ Topic 7b Challenge</h5>
                        <p class="text-sm">Change <code>how='inner'</code> to <code>how='outer'</code>. Observe how NaN
                            values appear for countries that don't have a match.</p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('topic7')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Topic 7
                        </button>
                        <button onclick="switchTopic('topic8')" class="next-btn">
                            Next: Topic 8
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Topic 8 -->
                <div id="topic8" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1504868584819-f8e8b4b6d7e3?auto=format&fit=crop&w=1200&q=80"
                        alt="Pollution" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Topic 8: Data Integrity & Cleaning</h2>

                    <h3>Theoretical Framework</h3>
                    <p>Real-world data has holes (NaNs) and errors (Outliers).
                        <strong>Imputation</strong> fills holes with logic (mean/median/interpolation).
                        <strong>Outlier Detection</strong> uses stats (like Z-Score or IQR) to flag suspicious values
                        that could skew your average.
                    </p>

                    <h4>Part A: Handling Missing AQI Data (Interpolation)</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Sensors fail. We estimate missing air quality readings by drawing a
                            line between known points (Linear Interpolation). This is better than filling with Zero,
                            which would incorrectly pull the average down.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>interpolate()</code>: Fills gaps linearly (e.g., halfway between 10 and 20 is 15).
                            </li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import pandas as pd
import numpy as np

df = pd.DataFrame({
    'Day': [1, 2, 3, 4],
    'AQI': [350, np.nan, np.nan, 320]
})

df['AQI_Clean'] = df['AQI'].interpolate()
print(df)</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span> Day AQI AQI_Clean
                        0 1 350.0 350.0
                        1 2 NaN 340.0
                        2 3 NaN 330.0
                        3 4 320.0 320.0</div>

                    <h4>Part B: String Cleaning</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Data entry errors are common. " India " is not the same as "India"
                            due to the extra spaces. We must strip whitespace to ensure grouping works correctly.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>str.strip()</code>: Removes leading/trailing spaces.</li>
                            <li><code>str.upper()</code>: Standardizes case to handle "usa" vs "USA".</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>df_messy = pd.DataFrame({'Country': [' India ', 'usa', 'UK']})

# Clean the strings
df_messy['Country'] = df_messy['Country'].str.strip().str.upper()

print(df_messy)</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span> Country
                        0 INDIA
                        1 USA
                        2 UK</div>

                    <div class="practice-box">
                        <h5>üöÄ Topic 8 Challenge</h5>
                        <p class="text-sm">Filter out rows where AQI is negative (impossible values). Use logic:
                            <code>df[df['AQI'] >= 0]</code>.
                        </p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('merging')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Topic 7b
                        </button>
                        <button onclick="switchTopic('topic9')" class="next-btn">
                            Next: Topic 9
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Topic 9 -->
                <div id="topic9" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1590283603385-17ffb3a7f29f?auto=format&fit=crop&w=1200&q=80"
                        alt="Global Economy" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Topic 9: WEO Case Study</h2>

                    <h3>Theoretical Framework</h3>
                    <p>In Time Series analysis (like <strong>Vector Autoregression</strong> models), raw data is often
                        "noisy" due to daily fluctuations. We use <strong>Rolling Windows</strong> to smooth out
                        short-term noise and reveal long-term structural trends, which is essential for forecasting.</p>

                    <h4>Part A: Rolling Averages (Smoothing)</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Calculating the 3-Month Moving Average of inflation. This shows the
                            general direction of prices rather than monthly spikes.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>rolling(window=3)</code>: Creates a moving window of size 3 rows.</li>
                            <li><code>mean()</code>: Calculates the average within that moving window.</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import pandas as pd

df = pd.DataFrame({
    'Month': ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
    'Inflation': [5.1, 5.3, 5.2, 6.8, 5.4]
})

# 3-Month Moving Average
df['Rolling_Avg'] = df['Inflation'].rolling(window=3).mean()

print(df)</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span> Month Inflation
                        Rolling_Avg
                        0 Jan 5.1 NaN
                        1 Feb 5.3 NaN
                        2 Mar 5.2 5.200000
                        3 Apr 6.8 5.766667
                        4 May 5.4 5.800000</div>

                    <h4>Part B: Year-over-Year Growth</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Calculating how much the economy grew compared to the previous
                            period (Rate of Change).</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>pct_change()</code>: Calculates percentage change between current element and the
                                one immediately prior.</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>df_gdp = pd.DataFrame({'GDP': [100, 105, 110, 108]})
df_gdp['Growth_Rate'] = df_gdp['GDP'].pct_change() * 100
print(df_gdp)</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span> GDP Growth_Rate
                        0 100 NaN
                        1 105 5.000000
                        2 110 4.761905
                        3 108 -1.818182</div>

                    <div class="practice-box">
                        <h5>üöÄ Topic 9 Challenge</h5>
                        <p class="text-sm">Change the rolling window to 2 (`window=2`) to see a more sensitive moving
                            average.</p>
                    </div>

                    <div class="chart-container">
                        <canvas id="weoChart"></canvas>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('topic8')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Topic 8
                        </button>
                        <button onclick="switchTopic('topic10')" class="next-btn">
                            Next: Topic 10
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Topic 10 -->
                <div id="topic10" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1578575437130-527eed3abbec?auto=format&fit=crop&w=1200&q=80"
                        alt="Trade" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Topic 10: Trade Case Study</h2>

                    <h3>Theoretical Framework</h3>
                    <p>International trade data is complex. We often use <strong>Pivot Tables</strong> to reorganize
                        data from a "Long Format" (Transaction Logs) to a "Wide Format" (Matrix) for better readability.
                        This helps in spotting trade deficits or surpluses visually.</p>

                    <h4>Pivot Table Analysis</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Converting a list of transactions into a matrix where rows are
                            Exporters and columns are Sectors. It summarizes total trade value in the intersecting
                            cells.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>pivot_table()</code>: The Excel-killer function.</li>
                            <li><code>index='Exporter'</code>: What becomes the rows.</li>
                            <li><code>columns='Sector'</code>: What becomes the columns.</li>
                            <li><code>values='Value'</code>: What numbers fill the cells.</li>
                            <li><code>aggfunc='sum'</code>: How to combine duplicates (Sum them up).</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import pandas as pd

df = pd.DataFrame({
    'Exporter': ['India', 'India', 'China', 'China'],
    'Sector': ['Tech', 'Pharma', 'Tech', 'Pharma'],
    'Value': [200, 50, 500, 20]
})

# Create Matrix
matrix = df.pivot_table(index='Exporter', columns='Sector', values='Value', aggfunc='sum')

print("--- Trade Matrix ---")
print(matrix)</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>--- Trade Matrix ---
                        Sector Pharma Tech
                        Exporter
                        China 20 500
                        India 50 200</div>

                    <div class="practice-box">
                        <h5>üöÄ Topic 10 Challenge</h5>
                        <p class="text-sm">Filter the original DataFrame for 'Sector' == 'Tech' before creating the
                            Pivot Table.</p>
                    </div>

                    <div class="chart-container">
                        <canvas id="tradeChart"></canvas>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('topic9')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Topic 9
                        </button>
                        <button onclick="switchTopic('viz')" class="next-btn">
                            Next: Adv Viz
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Advanced Viz -->
                <div id="viz" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=1200&q=80"
                        alt="Viz" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Advanced Visualisation</h2>
                    <p>While pandas handles the data, <strong>Matplotlib</strong> and <strong>Seaborn</strong> handle
                        the aesthetics.</p>

                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import matplotlib.pyplot as plt

years = [2020, 2021, 2022, 2023]
gdp = [2.5, 3.0, 3.2, 3.7]

plt.figure(figsize=(8, 4))
plt.plot(years, gdp, marker='o', linestyle='--', color='blue')
plt.title('India GDP Trend (Trillions USD)')
plt.grid(True)
plt.show()</code></pre>
                    </div>

                    <div class="practice-box">
                        <h5>üöÄ Visualisation Challenge</h5>
                        <p class="text-sm">Change <code>color='blue'</code> to <code>color='red'</code> and
                            <code>linestyle='--'</code> to <code>linestyle='-'</code> (solid line).
                        </p>
                    </div>

                    <div class="chart-container">
                        <canvas id="timeSeriesChart"></canvas>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('topic10')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Topic 10
                        </button>
                        <button onclick="switchTopic('kendrick')" class="next-btn">
                            Next: Data Storytelling
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Kendrick Lamar Section -->
                <div id="kendrick" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <!-- Replaced Getty Images Embed with iframe -->
                    <div class="mb-8 flex justify-center">
                        <div class="getty embed image"
                            style="background-color:#fff;display:inline-block;font-family:Roboto,sans-serif;color:#a7a7a7;font-size:11px;width:100%;max-width:594px;">
                            <div style="padding:0;margin:0;text-align:left;">
                                <a href="https://www.gettyimages.com/detail/2158458565" target="_blank"
                                    style="color:#a7a7a7;text-decoration:none;font-weight:normal !important;border:none;display:inline-block;">Embed
                                    from Getty Images</a>
                            </div>
                            <div style="overflow:hidden;position:relative;height:0;padding:66.66667% 0 0 0;width:100%;">
                                <iframe
                                    src="https://embed.gettyimages.com/embed?assets=2158458565,669272418,669282340,2197345941,2197333553&et=kgCxwaVIS71dLMgP0P6j3Q&tld=com&sig=da98RiG0Ks0INHGG3L060E-FYIHIrGgxs0waoeUw8RI=&caption=true&ver=1"
                                    scrolling="no" frameborder="0" width="594" height="396"
                                    style="display:inline-block;position:absolute;top:0;left:0;width:100%;height:100%;margin:0;"></iframe>
                            </div>
                        </div>
                    </div>

                    <h2>Data Storytelling: The Structure of Narrative</h2>

                    <div
                        class="bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-600 dark:border-blue-500 p-6 rounded-r-lg mb-8">
                        <h4 class="text-blue-900 dark:text-blue-100 font-bold mb-2">The DAMN. Hypothesis</h4>
                        <p class="text-blue-800 dark:text-blue-200 text-sm">Kendrick Lamar's Pulitzer-winning album
                            <em>DAMN.</em> is
                            famous for a unique structural property: it tells two completely different stories depending
                            on the order you listen to the tracks.
                        </p>
                        <ul class="list-disc ml-5 mt-2 text-blue-800 dark:text-blue-200 text-sm">
                            <li><strong>Forward Order (1-14):</strong> A story of wickedness leading to weakness and
                                death.</li>
                            <li><strong>Reverse Order (14-1):</strong> A story of weakness finding redemption and
                                wickedness.</li>
                        </ul>
                        <p class="mt-4 text-blue-800 dark:text-blue-200 text-sm font-semibold">This is a perfect analogy
                            for how data
                            sorting and directionality (Topic 3 Slicing) can completely alter the insights derived from
                            a dataset.</p>
                    </div>

                    <h3>Part 1: Simple Reversal (Slicing)</h3>
                    <div class="code-explanation">
                        <div class="simple-english">Using Python's slicing magic `[::-1]` to instantly reverse the
                            "dataset" of tracks, revealing the hidden narrative.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>tracks[::-1]</code>: The "step" is -1, meaning "start from the end and walk
                                backwards". (Module 3)</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code># The DAMN. Hypothesis: Order changes Meaning
tracks = ["BLOOD.", "DNA.", "YAH.", "ELEMENT.", "FEEL.", "LOYALTY.", "PRIDE.", "HUMBLE.", "LUST.", "LOVE.", "XXX.", "FEAR.", "GOD.", "DUCKWORTH."]

# Original Narrative (1 to 14)
print("--- Forward Narrative (Wickedness leads to Weakness) ---")
print(tracks)

# Collectors Edition Narrative (14 to 1)
print("\n--- Reversed Narrative (Weakness leads to Wickedness) ---")
print(tracks[::-1])</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>--- Forward Narrative
                        (Wickedness leads to Weakness) ---
                        ['BLOOD.', 'DNA.', 'YAH.', 'ELEMENT.', 'FEEL.', 'LOYALTY.', 'PRIDE.', 'HUMBLE.', 'LUST.',
                        'LOVE.', 'XXX.', 'FEAR.', 'GOD.', 'DUCKWORTH.']

                        --- Reversed Narrative (Weakness leads to Wickedness) ---
                        ['DUCKWORTH.', 'GOD.', 'FEAR.', 'XXX.', 'LOVE.', 'LUST.', 'HUMBLE.', 'PRIDE.', 'LOYALTY.',
                        'FEEL.', 'ELEMENT.', 'YAH.', 'DNA.', 'BLOOD.']</div>

                    <h3 class="mt-12">Part 2: Capstone Analysis - Quantifying the Arc</h3>
                    <div class="code-explanation">
                        <div class="simple-english">We will now prove the "Wickedness vs. Weakness" theory using Data
                            Science. We assign an 'Aggression Score' to each track, create a DataFrame, reverse it, and
                            use Rolling Averages to visualize the emotional trajectory.</div>
                        <h5>Methodology (Combining Modules 1-9)</h5>
                        <ul class="syntax-list">
                            <li><strong>Ingestion:</strong> Create a DataFrame with Track Names and Aggression Scores
                                (Module 1 & 5).</li>
                            <li><strong>Transformation:</strong> Create a reverse version of the DataFrame (Module 3).
                            </li>
                            <li><strong>Analysis:</strong> Calculate a Rolling Average to smooth out individual track
                                variance and see the "Trend" (Module 9).</li>
                            <li><strong>Visualisation:</strong> Plot the two arcs against each other (Advanced Viz).
                            </li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import pandas as pd
import matplotlib.pyplot as plt

# 1. Ingestion: Define Data (Module 1/5)
# Score: 100 = Pure Aggression (Wickedness), 0 = Pure Contemplation (Weakness)
data = {
    'Track': ["BLOOD.", "DNA.", "YAH.", "ELEMENT.", "FEEL.", "LOYALTY.", "PRIDE.", "HUMBLE.", "LUST.", "LOVE.", "XXX.", "FEAR.", "GOD.", "DUCKWORTH."],
    'Aggression_Score': [20, 100, 30, 80, 40, 50, 30, 90, 60, 20, 85, 10, 50, 40]
}

# 2. DataFrame Creation (Module 5)
df_forward = pd.DataFrame(data)

# 3. Analysis: Calculate Narrative Flow using Rolling Window (Module 9)
# We use a window of 3 tracks to see the "moving sentiment"
df_forward['Narrative_Arc'] = df_forward['Aggression_Score'].rolling(window=3).mean()

# 4. Transformation: Create Reverse Data (Module 3)
# We flip the dataframe upside down
df_reverse = df_forward.iloc[::-1].reset_index(drop=True)
df_reverse['Narrative_Arc'] = df_reverse['Aggression_Score'].rolling(window=3).mean()

print("--- Forward Arc (First 5 Steps) ---")
print(df_forward[['Track', 'Narrative_Arc']].head())

print("\n--- Reverse Arc (First 5 Steps) ---")
print(df_reverse[['Track', 'Narrative_Arc']].head())</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>--- Forward Arc (First 5
                        Steps) ---
                        Track Narrative_Arc
                        0 BLOOD. NaN
                        1 DNA. NaN
                        2 YAH. 50.000000
                        3 ELEMENT. 70.000000
                        4 FEEL. 50.000000

                        --- Reverse Arc (First 5 Steps) ---
                        Track Narrative_Arc
                        0 DUCKWORTH. NaN
                        1 GOD. NaN
                        2 FEAR. 33.333333
                        3 XXX. 48.333333
                        4 LOVE. 38.333333</div>

                    <h4 class="mt-8">Visualising the Sentiment Trajectory</h4>
                    <p class="text-sm text-slate-600 mb-4">Notice how the Blue Line (Forward) generally trends downwards
                        (High Aggression -> Low), while the Red Line (Reverse) trends upwards? This visually confirms
                        the album's dual narrative structure.</p>
                    <div class="chart-container">
                        <canvas id="kendrickChart"></canvas>
                    </div>

                    <div class="practice-box">
                        <h5>üöÄ Storytelling Challenge</h5>
                        <p class="text-sm">Create a list of 5 major life events in chronological order. Reverse them
                            using slicing to see if it tells a "Benjamin Button" style story.</p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('viz')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Adv Viz
                        </button>
                        <button onclick="switchTopic('grammy')" class="next-btn">
                            Next: Grammy Capstone
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- NEW: Grammy Analytics Capstone Section -->
                <div id="grammy" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://thefulcrum.ca/wp-content/uploads/2023/01/grammys.jpg"
                        alt="Grammy Award Background" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Capstone: Grammy Awards Analytics</h2>

                    <h3>The "EGOT" Trajectory Analysis</h3>
                    <p>In this advanced module, we combine every skill learned so far to analyze the relationship
                        between <strong>Critical Acclaim</strong> (Grammy Wins) and <strong>Commercial Success</strong>
                        (Global Streams). We will create a complex multi-dimensional dataset and visualize it using a
                        Bubble Chart.</p>

                    <h3>Advanced Concepts Applied</h3>
                    <ul class="list-disc ml-5 mb-6">
                        <li><strong>MinMax Scaling (Preprocessing):</strong> Normalizing "Streams" (Billions) and
                            "Metacritic Scores" (0-100) onto a similar 0-1 scale for comparison.</li>
                        <li><strong>Weighted Composite Scores:</strong> Creating a "Legend Status" index by combining
                            Wins + Streams.</li>
                        <li><strong>Multidimensional Plotting:</strong> Visualizing 4 dimensions at once: X, Y, Size,
                            and Color.</li>
                    </ul>

                    <h3>Code Implementation</h3>
                    <div class="code-explanation">
                        <div class="simple-english">We simulate a dataset of top artists, calculate a "Power Index"
                            based on their stats, and prepare the data for a complex visualisation.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>SimpleImputer</code> / <code>MinMaxScaler</code>: Standard Data Science
                                preprocessing steps (simulated manually here for clarity).</li>
                            <li><code>zip()</code>: A Python function that aggregates elements from multiple lists into
                                a single iterator. Essential for plotting.</li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import pandas as pd
import numpy as np

# 1. Complex Data Ingestion (Simulated Dictionary)
grammy_data = {
    'Artist': ['Beyonc√©', 'Taylor Swift', 'Kendrick Lamar', 'Adele', 'Billie Eilish', 'Harry Styles'],
    'Genre': ['R&B', 'Pop', 'Hip-Hop', 'Pop', 'Alt', 'Pop'],
    'Grammy_Wins': [32, 14, 17, 16, 9, 3],
    'Global_Streams_B': [35.0, 50.0, 20.0, 25.0, 28.0, 22.0], # Billions
    'Metacritic_Avg': [88, 85, 94, 80, 86, 78]
}
df = pd.DataFrame(grammy_data)

# 2. Advanced Feature Engineering: "Legend Index"
# Formula: (Wins * 0.6) + (Streams * 0.4) -> Weighing Prestige more than Popularity
df['Legend_Index'] = (df['Grammy_Wins'] * 0.6) + (df['Global_Streams_B'] * 0.4)

# 3. Normalization (Scaling Streams to compare with scores)
# Scale streams to 0-100 range for fair comparison with Metacritic
df['Streams_Scaled'] = (df['Global_Streams_B'] / df['Global_Streams_B'].max()) * 100

print("--- Artist Power Ranking (Top 3) ---")
print(df.sort_values('Legend_Index', ascending=False).head(3))</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span>--- Artist Power Ranking
                        (Top 3) ---
                        Artist Genre Grammy_Wins Global_Streams_B Legend_Index
                        0 Beyonc√© R&B 32 35.0 33.2
                        1 Taylor Swift Pop 14 50.0 28.4
                        2 Kendrick Lamar Hip-Hop 17 20.0 18.2</div>

                    <h4 class="mt-8">Visualising Success: Critical vs. Commercial</h4>
                    <p class="text-sm text-slate-600 mb-4">
                        <strong>X-Axis:</strong> Commercial Success (Streams)<br>
                        <strong>Y-Axis:</strong> Critical Acclaim (Metacritic Score)<br>
                        <strong>Bubble Size:</strong> Total Grammy Wins (Prestige)<br>
                        <strong>Color:</strong> Genre
                    </p>

                    <!-- Direct Kaggle Dataset Access via Croissant -->
                    <div
                        class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800 mb-6">
                        <h4 class="font-bold text-slate-900 dark:text-slate-50 mb-2">Live Grammy Dataset (Kaggle
                            Croissant)</h4>
                        <p class="text-sm text-slate-600 dark:text-slate-300 mb-3">This page uses pre-loaded sample data
                            by default. <strong>Optional:</strong> To fetch live data from Kaggle, run the Flask
                            backend:</p>
                        <div class="command-box p-3 rounded mb-3">
                            <p class="text-xs font-mono">python grammy_server.py</p>
                        </div>
                        <p class="text-xs text-slate-500 dark:text-slate-400 mb-3">The server will fetch Kaggle data
                            using <code>mlcroissant</code> and serve it at <code>/api/grammy</code> endpoint.</p>
                        <div id="grammyUploadLog"
                            class="text-xs text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-950 p-2 rounded border border-slate-200 dark:border-slate-800">
                            Checking for local server...</div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="chart-container">
                            <canvas id="grammyChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="grammyEvolutionChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="grammyScatterChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="grammyBig4Chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="grammyPolarChart"></canvas>
                        </div>
                    </div>

                    <div class="practice-box">
                        <h5>üöÄ Capstone Challenge</h5>
                        <p class="text-sm">Modify the 'Legend_Index' formula to weigh Commercial Success (Streams)
                            higher (e.g., 0.8) than Wins. How does the ranking change?</p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('kendrick')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Data Storytelling
                        </button>
                        <button onclick="switchTopic('govdata')" class="next-btn">
                            Next: Pipelines
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Gov Data -->
                <div id="govdata" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&w=1200&q=80"
                        alt="Pipeline" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Real-World Pipelines</h2>

                    <h4>Fetching FRED API Data</h4>
                    <div class="code-explanation">
                        <div class="simple-english">Downloading live inflation data from the US Federal Reserve directly
                            via URL. We add error handling in case the internet is down.</div>
                        <h5>Detailed Syntax Breakdown</h5>
                        <ul class="syntax-list">
                            <li><code>try...except</code>: Prevents the program from crashing if the URL is unreachable.
                            </li>
                        </ul>
                    </div>
                    <div class="relative">
                        <button class="copy-btn">Copy Code</button>
                        <pre><code>import pandas as pd

# Federal Reserve Economic Data (FRED) URL
url = "https://fred.stlouisfed.org/graph/fredgraph.csv?id=CPIAUCSL"

try:
    # Read directly from internet
    df = pd.read_csv(url, parse_dates=['DATE'], index_col='DATE')
    print(df.tail(3))
except:
    print("Error: Unable to fetch data. Check internet connection.")</code></pre>
                    </div>
                    <div class="output-block"><span class="output-label">Terminal Output</span> CPIAUCSL
                        DATE
                        2023-10-01 307.671
                        2023-11-01 307.051
                        2023-12-01 306.746</div>

                    <div class="practice-box">
                        <h5>üöÄ Pipeline Challenge</h5>
                        <p class="text-sm">If you can't reach the URL, try creating a dummy dictionary with Date and CPI
                            keys and convert it to a DataFrame manually.</p>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('grammy')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Grammy Capstone
                        </button>
                        <button onclick="switchTopic('learning')" class="next-btn">
                            Next: Further Learning
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Learning Roadmap -->
                <div id="roadmap" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=1200&q=80"
                        alt="Further Learning" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Further Learning Roadmap</h2>
                    <p>You have mastered the basics of DataFrames. The next steps involve storage, advanced statistics,
                        and prediction.</p>

                    <div class="grid md:grid-cols-2 gap-6 mt-6">
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800">
                            <h4 class="text-blue-600 dark:text-blue-400 font-bold mb-2">1. SQL (Structured Query
                                Language)</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300 mb-2">CSV files are for small data.
                                Real companies use SQL databases. Learn <code>SELECT * FROM table</code> logic.</p>
                            <a href="https://sqlzoo.net/" target="_blank"
                                class="text-xs font-mono bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 p-1 rounded hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors">Resource:
                                SQLZoo</a>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800">
                            <h4 class="text-indigo-600 dark:text-indigo-400 font-bold mb-2">2. Machine Learning
                                (Scikit-Learn)</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300 mb-2">Move from "What happened?" to
                                "What will happen?". Learn Linear Regression for GDP forecasting.</p>
                            <a href="https://www.kaggle.com/learn" target="_blank"
                                class="text-xs font-mono bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-1 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors">Resource:
                                Kaggle Learn</a>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800">
                            <h4 class="text-emerald-600 dark:text-emerald-400 font-bold mb-2">3. Econometrics
                                (Statsmodels)</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300 mb-2">For rigorous statistical testing
                                (P-values, R-squared) specifically for economics research.</p>
                            <a href="https://www.statsmodels.org/stable/index.html" target="_blank"
                                class="text-xs font-mono bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 p-1 rounded hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition-colors">Resource:
                                Statsmodels Docs</a>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800">
                            <h4 class="text-amber-600 dark:text-amber-400 font-bold mb-2">4. Geospatial Analysis
                                (Geopandas)</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300 mb-2">Plotting economic data on maps
                                (Choropleths). Essential for regional development studies.</p>
                            <a href="https://geopandas.org/" target="_blank"
                                class="text-xs font-mono bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 p-1 rounded hover:bg-amber-100 dark:hover:bg-amber-900/50 transition-colors">Resource:
                                Geopandas.org</a>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800">
                            <h4 class="text-purple-600 dark:text-purple-400 font-bold mb-2">5. FreeCodeCamp Data
                                Analysis</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300 mb-2">A comprehensive, free
                                certification course for data analysis with Python.</p>
                            <a href="https://www.freecodecamp.org/learn/data-analysis-with-python/" target="_blank"
                                class="text-xs font-mono bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 p-1 rounded hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-colors">Resource:
                                FreeCodeCamp</a>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800">
                            <h4 class="text-red-600 dark:text-red-400 font-bold mb-2">6. Coursera (Audit Mode)</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300 mb-2">Access high-quality courses from
                                top universities for free by selecting the "Audit" option.</p>
                            <a href="https://www.coursera.org/" target="_blank"
                                class="text-xs font-mono bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/50 transition-colors">Resource:
                                Coursera</a>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800">
                            <h4 class="text-gray-800 dark:text-gray-300 font-bold mb-2">7. Book Recommendation</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300 mb-2">"Python for Data Analysis" by Wes
                                McKinney (Creator of Pandas). The definitive guide.</p>
                            <a href="https://wesmckinney.com/book/" target="_blank"
                                class="text-xs font-mono bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">Resource:
                                Read Online</a>
                        </div>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('learning')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Further Learning
                        </button>
                        <button onclick="switchTopic('faq')" class="next-btn">
                            Next: FAQ
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Resources: FAQ -->
                <div id="faq" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1512314889357-e157c22f938d?auto=format&fit=crop&w=1200&q=80"
                        alt="FAQ" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Frequently Asked Questions</h2>
                    <div class="space-y-4 mt-8">
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: "ModuleNotFoundError: No module named pandas"
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">You haven't installed the
                                library. Open your terminal/command prompt and run: <code>pip install pandas</code> or
                                <code>conda install pandas</code>.
                            </p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: Why use Jupyter over IDLE?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Jupyter allows you to see the
                                output of code immediately below the cell and supports markdown text for explanations.
                                It is the standard for Data Science storytelling.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is the "SettingWithCopyWarning"?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">This happens when you filter a
                                DataFrame (e.g., <code>df[df['A']>5]</code>) and then try to modify it immediately.
                                Pandas isn't sure if you want to modify the original or the copy. Fix: Use
                                <code>.copy()</code> explicitly: <code>new_df = df[df['A']>5].copy()</code>.
                            </p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What does `inplace=True` do?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">By default, pandas returns a
                                <em>new</em> modified object and leaves the original untouched.
                                <code>inplace=True</code> modifies the original object directly to save memory. Example:
                                <code>df.drop('col', axis=1, inplace=True)</code>.
                            </p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: Difference between `merge` and `concat`?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300"><code>merge</code> joins data
                                horizontally based on a Key (like SQL JOIN). <code>concat</code> stacks data vertically
                                (adding more rows) or horizontally (adding columns) purely by position.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is the difference between `axis=0` and `axis=1`?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300"><code>axis=0</code> usually
                                refers to rows (or the index), meaning the operation goes down the DataFrame (e.g., mean
                                of a column). <code>axis=1</code> refers to columns, meaning the operation goes across
                                the DataFrame (e.g., mean of a row).</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: Matplotlib vs. Seaborn?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Matplotlib is the foundation;
                                it's powerful but verbose. Seaborn is built on top of Matplotlib; it's easier to use,
                                has better default styles, and is designed specifically for statistical plots.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: How do I handle "NaN" values?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">You can drop them using
                                <code>dropna()</code> or fill them using <code>fillna()</code> (with a mean, median, or
                                zero). Advanced methods include interpolation (Topic 8).
                            </p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What makes Python popular for data science?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">It has clean syntax, strong
                                library support, active community, and works well with machine learning frameworks.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What are the essential Python libraries for data science?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">NumPy, Pandas, Matplotlib,
                                Seaborn, Scikit-learn, SciPy, Statsmodels, and frameworks like TensorFlow or PyTorch.
                            </p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is the difference between a list, tuple, and NumPy array?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Lists are general purpose, tuples
                                are immutable, and NumPy arrays support vectorized numerical computation.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is vectorization in NumPy?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Executing operations on entire
                                arrays without explicit Python loops.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: Why do data scientists prefer Pandas DataFrame?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Structured tabular storage, easy
                                filtering, group operations, merging, and fast I/O.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: How do you handle missing values in Pandas?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Using functions like isna(),
                                dropna(), fillna(), or imputing values with averages or model based techniques.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is the difference between loc and iloc?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">loc uses labels. iloc uses
                                integer positions.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is broadcasting in NumPy?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Automatic expansion of smaller
                                arrays to match the shape of larger arrays during element wise operations.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is EDA?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Exploratory data analysis
                                involving summary statistics, visualizations, and pattern detection.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: How do you remove outliers?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Methods include z scores, IQR
                                method, domain rules, or model based anomaly detection.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What are the different types of data in Python?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Numeric, string, boolean, list,
                                tuple, dictionary, set, and custom objects.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: How do you read CSV files in Python?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Using pd.read_csv("file.csv")
                                from Pandas.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is the difference between NumPy and Pandas?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">NumPy focuses on numerical
                                arrays. Pandas is built on top of NumPy and adds labeled tabular data structures.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is a lambda function?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Small anonymous function defined
                                with lambda for inline operations.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: How do you merge or join DataFrames?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Using merge, join, or concat in
                                Pandas depending on the structure.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is a virtual environment in Python?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">An isolated environment
                                containing its own Python version and packages.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is feature scaling and why is it important?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Transforming variables to similar
                                ranges for better model stability. Techniques include normalization and standardization.
                            </p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is the purpose of train_test_split?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">To divide data into training and
                                testing sets for unbiased model evaluation.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is the difference between supervised and unsupervised learning?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Supervised learning uses labeled
                                data. Unsupervised learning finds hidden structure in unlabeled data.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: How do you evaluate a machine learning model in Python?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Using metrics like accuracy,
                                precision, recall, RMSE, or R¬≤ through Scikit-learn.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is overfitting and how can Python help prevent it?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">When a model memorizes instead of
                                generalizing. Techniques include cross validation, regularization, and dropout.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What are Python generators used for?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Creating iterators that produce
                                items lazily, useful for large datasets.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is a confusion matrix?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">A table showing true and
                                predicted classifications to understand model performance.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: How do you visualize data in Python?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Using libraries like Matplotlib,
                                Seaborn, or Plotly for plots such as histograms, scatter plots, heatmaps.</p>
                        </details>
                        <details
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <summary class="font-bold cursor-pointer flex justify-between">
                                Q: What is pickling in Python?
                                <span class="text-blue-500 dark:text-blue-400">+</span>
                            </summary>
                            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Serializing objects using pickle
                                so that models or structures can be saved and loaded later.</p>
                        </details>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('roadmap')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Roadmap
                        </button>
                        <button onclick="switchTopic('glossary')" class="next-btn">
                            Next: Glossary
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Resources: Glossary -->
                <div id="glossary" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1516116216624-53e697fedbea?auto=format&fit=crop&w=1200&q=80"
                        alt="Glossary" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Glossary</h2>
                    <div class="grid md:grid-cols-2 gap-6 mt-6">
                        <div
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <h4 class="font-bold text-slate-900 dark:text-slate-50">Vectorization</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300">Performing operations on entire arrays
                                at once (simultaneous), rather than one by one (iterative). Key to Python's speed.</p>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <h4 class="font-bold text-slate-900 dark:text-slate-50">DataFrame</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300">A 2-dimensional labeled data structure
                                with columns of potentially different types (like a spreadsheet).</p>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <h4 class="font-bold text-slate-900 dark:text-slate-50">Imputation</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300">The process of replacing missing data
                                with substituted values (like mean, median, or interpolated values).</p>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <h4 class="font-bold text-slate-900 dark:text-slate-50">Broadcasting</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300">NumPy's ability to perform arithmetic
                                on arrays of different shapes (e.g., adding a scalar to a matrix).</p>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <h4 class="font-bold text-slate-900 dark:text-slate-50">Feature Engineering</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300">Creating new meaningful variables from
                                existing data (e.g., calculating "Growth Rate" from raw "GDP" values).</p>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <h4 class="font-bold text-slate-900 dark:text-slate-50">Method Chaining</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300">Calling multiple methods sequentially
                                on the same object in a single line of code (e.g.,
                                <code>df.groupby().mean().sort_values()</code>).
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <h4 class="font-bold text-slate-900 dark:text-slate-50">Boolean Indexing</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300">Selecting subsets of data based on the
                                actual values of the data rather than their row/column labels or integer positions
                                (e.g., <code>df[df['Value'] > 10]</code>).</p>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                            <h4 class="font-bold text-slate-900 dark:text-slate-50">Correlation</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-300">A statistical measure that expresses
                                the extent to which two variables are linearly related (meaning they change together at
                                a constant rate).</p>
                        </div>
                    </div>

                    <div class="next-btn-container">
                        <button onclick="switchTopic('faq')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: FAQ
                        </button>
                        <button onclick="switchTopic('references')" class="next-btn">
                            Next: References
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Resources: References -->
                <div id="references" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1532012197267-da84d127e765?auto=format&fit=crop&w=1200&q=80"
                        alt="References" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>References (APA 7)</h2>
                    <ul class="space-y-4 mt-6">
                        <li class="bg-white p-4 rounded-lg border border-slate-200 text-sm">
                            <strong>McKinney, W. (2010).</strong> Data Structures for Statistical Computing in Python.
                            <em>Proceedings of the 9th Python in Science Conference</em>. <a
                                href="https://doi.org/10.25080/Majora-92bf1922-00a" target="_blank"
                                class="text-blue-600 underline">https://doi.org/10.25080/Majora-92bf1922-00a</a>
                        </li>
                        <li class="bg-white p-4 rounded-lg border border-slate-200 text-sm">
                            <strong>Harris, C. R., et al. (2020).</strong> Array programming with NumPy.
                            <em>Nature</em>, 585, 357‚Äì362. <a href="https://doi.org/10.1038/s41586-020-2649-2"
                                target="_blank"
                                class="text-blue-600 underline">https://doi.org/10.1038/s41586-020-2649-2</a>
                        </li>
                        <li class="bg-white p-4 rounded-lg border border-slate-200 text-sm">
                            <strong>International Monetary Fund. (2023).</strong> <em>World Economic Outlook
                                Database</em>. Washington, D.C.: IMF. Retrieved from <a
                                href="https://www.imf.org/en/Publications/WEO" target="_blank"
                                class="text-blue-600 underline">IMF.org</a>
                        </li>
                        <li class="bg-white p-4 rounded-lg border border-slate-200 text-sm">
                            <strong>VanderPlas, J. (2016).</strong> <em>Python Data Science Handbook: Essential Tools
                                for Working with Data</em>. O'Reilly Media. <a
                                href="https://jakevdp.github.io/PythonDataScienceHandbook/" target="_blank"
                                class="text-blue-600 underline">https://jakevdp.github.io/PythonDataScienceHandbook/</a>
                        </li>
                        <li class="bg-white p-4 rounded-lg border border-slate-200 text-sm">
                            <strong>Pedregosa, F., et al. (2011).</strong> Scikit-learn: Machine Learning in Python.
                            <em>Journal of Machine Learning Research</em>, 12(Oct), 2825‚Äì2830. <a
                                href="https://www.jmlr.org/papers/volume12/pedregosa11a/pedregosa11a.pdf"
                                target="_blank"
                                class="text-blue-600 underline">https://www.jmlr.org/papers/volume12/pedregosa11a/pedregosa11a.pdf</a>
                        </li>
                        <li class="bg-white p-4 rounded-lg border border-slate-200 text-sm">
                            <strong>Hunter, J. D. (2007).</strong> Matplotlib: A 2D graphics environment.
                            <em>Computing in Science & Engineering</em>, 9(3), 90‚Äì95. <a
                                href="https://doi.org/10.1109/MCSE.2007.55" target="_blank"
                                class="text-blue-600 underline">https://doi.org/10.1109/MCSE.2007.55</a>
                        </li>
                        <li class="bg-white p-4 rounded-lg border border-slate-200 text-sm">
                            <strong>Waskom, M. L. (2021).</strong> seaborn: statistical data visualization.
                            <em>Journal of Open Source Software</em>, 6(60), 3021. <a
                                href="https://doi.org/10.21105/joss.03021" target="_blank"
                                class="text-blue-600 underline">https://doi.org/10.21105/joss.03021</a>
                        </li>
                        <li class="bg-white p-4 rounded-lg border border-slate-200 text-sm">
                            <strong>G√©ron, A. (2022).</strong> <em>Hands-On Machine Learning with Scikit-Learn, Keras,
                                and
                                TensorFlow</em> (3rd ed.). O'Reilly Media. <a
                                href="https://www.oreilly.com/library/view/hands-on-machine-learning/9781098125967/"
                                target="_blank"
                                class="text-blue-600 underline">https://www.oreilly.com/library/view/hands-on-machine-learning/9781098125967/</a>
                        </li>
                        <li class="bg-white p-4 rounded-lg border border-slate-200 text-sm">
                            <strong>Van Rossum, G., & Drake, F. L. (2009).</strong> <em>Python 3 Reference Manual</em>.
                            CreateSpace. <a href="https://docs.python.org/3/reference/" target="_blank"
                                class="text-blue-600 underline">https://docs.python.org/3/reference/</a>
                        </li>
                    </ul>
                    <div class="next-btn-container">
                        <button onclick="switchTopic('glossary')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Glossary
                        </button>
                        <button onclick="switchTopic('home')" class="next-btn">
                            Next: Home
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Resources: Further Learning -->
                <div id="learning" class="topic-panel hidden bg-white dark:bg-slate-950 rounded-2xl p-8 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1513258496098-882605922721?auto=format&fit=crop&w=1200&q=80"
                        alt="Further Learning" class="w-full h-48 object-cover rounded-2xl mb-8 shadow-sm">
                    <h2>Further Learning Resources</h2>
                    <p class="mb-6 text-slate-600 dark:text-slate-300">A curated list of courses and resources to
                        continue
                        your data science journey.</p>

                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-slate-600 dark:text-slate-300">
                            <thead
                                class="text-xs text-slate-700 uppercase bg-slate-50 dark:bg-slate-800 dark:text-slate-400">
                                <tr>
                                    <th scope="col" class="px-6 py-3 rounded-tl-lg">Course/Resource</th>
                                    <th scope="col" class="px-6 py-3">Description</th>
                                    <th scope="col" class="px-6 py-3">Strengths / Use Case</th>
                                    <th scope="col" class="px-6 py-3">Link (Paid)</th>
                                    <th scope="col" class="px-6 py-3 rounded-tr-lg">Link (Free/Audit)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Python for Data
                                        Science, AI & Development (IBM, Coursera)</td>
                                    <td class="px-6 py-4">Python fundamentals + data manipulation + data I/O +
                                        introduction
                                        to data-science workflows</td>
                                    <td class="px-6 py-4">Good structured path from Python basics to data-handling +
                                        analysis + ML prep</td>
                                    <td class="px-6 py-4">(Coursera paid cert) <a
                                            href="https://www.coursera.org/learn/python-for-applied-data-science-ai"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.coursera.org/learn/python-for-applied-data-science-ai</a>
                                    </td>
                                    <td class="px-6 py-4">Free audit available <a
                                            href="https://www.coursera.org/learn/python-for-applied-data-science-ai"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.coursera.org/learn/python-for-applied-data-science-ai</a>
                                    </td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Data Analysis with
                                        Python (IBM, Coursera)</td>
                                    <td class="px-6 py-4">Data cleaning, manipulation, CSV/SQL I/O, exploratory data
                                        analysis, basic statistics & regression models</td>
                                    <td class="px-6 py-4">Solid for bridging from DataFrame/CSV work to analysis +
                                        simple
                                        modeling + real-world dataset handling</td>
                                    <td class="px-6 py-4">Paid certificate <a
                                            href="https://www.coursera.org/learn/data-analysis-with-python"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.coursera.org/learn/data-analysis-with-python</a>
                                    </td>
                                    <td class="px-6 py-4">Free audit available <a
                                            href="https://www.coursera.org/learn/data-analysis-with-python"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.coursera.org/learn/data-analysis-with-python</a>
                                    </td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Statistics with
                                        Python
                                        Specialization (University of Michigan, Coursera)</td>
                                    <td class="px-6 py-4">Probability, hypothesis testing, statistical inference,
                                        modeling,
                                        data visualization with Python</td>
                                    <td class="px-6 py-4">Important if you want strong foundation in
                                        statistics/inference
                                        before ML or advanced modeling</td>
                                    <td class="px-6 py-4">Paid certificate <a
                                            href="https://www.coursera.org/specializations/statistics-with-python"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.coursera.org/specializations/statistics-with-python</a>
                                    </td>
                                    <td class="px-6 py-4">Free audit available on Coursera</td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Machine Learning
                                        with
                                        Python (IBM, Coursera)</td>
                                    <td class="px-6 py-4">Supervised/unsupervised learning using Python and
                                        scikit-learn:
                                        regression, classification, clustering, evaluation, pipelines</td>
                                    <td class="px-6 py-4">Core for moving into predictive modeling, ML experiments and
                                        real-world tasks</td>
                                    <td class="px-6 py-4">Paid certificate <a
                                            href="https://www.coursera.org/learn/machine-learning-with-python"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.coursera.org/learn/machine-learning-with-python</a>
                                    </td>
                                    <td class="px-6 py-4">Free audit available often with Coursera trial</td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Python for Data
                                        Science
                                        and Machine Learning Bootcamp (Udemy)</td>
                                    <td class="px-6 py-4">Data manipulation, visualization, and ML workflows with
                                        Python,
                                        hands-on dataset projects</td>
                                    <td class="px-6 py-4">Good practical, project-based course to bridge data handling
                                        and
                                        ML without heavy theory overhead</td>
                                    <td class="px-6 py-4">Paid course <a
                                            href="https://www.udemy.com/course/python-for-data-science-and-machine-learning-bootcamp/"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.udemy.com/course/python-for-data-science-and-machine-learning-bootcamp/</a>
                                    </td>
                                    <td class="px-6 py-4">Udemy occasionally offers discounts (not free)</td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">freeCodeCamp ‚Äî Data
                                        Analysis with Python</td>
                                    <td class="px-6 py-4">Data wrangling with Pandas/NumPy, CSV/JSON handling,
                                        visualization, exploratory analysis</td>
                                    <td class="px-6 py-4">Good free starting point if you want self-paced practice with
                                        no
                                        cost barrier</td>
                                    <td class="px-6 py-4">‚Äî</td>
                                    <td class="px-6 py-4">Always free <a
                                            href="https://www.freecodecamp.org/learn/data-analysis-with-python"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.freecodecamp.org/learn/data-analysis-with-python</a>
                                    </td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Kaggle Learn
                                        Courses
                                        (Python / Data Cleaning / Machine Learning / Feature Engineering)</td>
                                    <td class="px-6 py-4">Short hands-on modules: data cleaning, ML basics, feature
                                        engineering, real-world dataset practice</td>
                                    <td class="px-6 py-4">Excellent for applying your learning on real messy data and
                                        building portfolio + practical skillset</td>
                                    <td class="px-6 py-4">‚Äî</td>
                                    <td class="px-6 py-4">Free (on-demand + certificate) <a
                                            href="https://www.kaggle.com/learn" target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.kaggle.com/learn</a>
                                    </td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Data Engineering in
                                        Python Track (DataCamp)</td>
                                    <td class="px-6 py-4">Focus on building data pipelines, automation, data I/O,
                                        handling
                                        larger datasets, and engineering workflows</td>
                                    <td class="px-6 py-4">Useful if you want to move beyond analysis to
                                        pipeline/data-engineering side ‚Äî important for realistic data workloads</td>
                                    <td class="px-6 py-4">Paid subscription <a
                                            href="https://www.datacamp.com/tracks/data-engineer-in-python"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.datacamp.com/tracks/data-engineer-in-python</a>
                                    </td>
                                    <td class="px-6 py-4">Limited free access/trial on DataCamp</td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Get Started with
                                        Python
                                        for Data Science (Codecademy)</td>
                                    <td class="px-6 py-4">Python fundamentals focused on data workflows and dataset
                                        manipulation</td>
                                    <td class="px-6 py-4">Good for bridging Python basics to data-science workflows
                                        especially if you want interactive beginner-friendly learning</td>
                                    <td class="px-6 py-4">Paid (or subscription) via Codecademy <a
                                            href="https://www.codecademy.com/learn/getting-started-with-python-for-data-science"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.codecademy.com/learn/getting-started-with-python-for-data-science</a>
                                    </td>
                                    <td class="px-6 py-4">Free-trial / limited free tiers <a
                                            href="https://www.codecademy.com/learn/getting-started-with-python-for-data-science"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.codecademy.com/learn/getting-started-with-python-for-data-science</a>
                                    </td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Course ‚ÄúPython for
                                        Data
                                        Science‚Äù (IIT Madras / NPTEL)</td>
                                    <td class="px-6 py-4">Python applied to data science problems; helpful for Indian
                                        students or those wanting structured academic-style course</td>
                                    <td class="px-6 py-4">Institutional setting; helps understand data-science with
                                        local
                                        context or emphasis on fundamentals</td>
                                    <td class="px-6 py-4">Usually free / open access via NPTEL <a
                                            href="https://onlinecourses.nptel.ac.in/noc25_cs104/preview" target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://onlinecourses.nptel.ac.in/noc25_cs104/preview</a>
                                    </td>
                                    <td class="px-6 py-4">Free to view/learn (certificate optional)</td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">General Python
                                        Programming Courses (for better scripting, data I/O, custom pipelines)</td>
                                    <td class="px-6 py-4">Full programming fundamentals: data structures, control flow,
                                        file
                                        I/O, scripting ‚Äî valuable for writing custom data pipelines or handling raw data
                                    </td>
                                    <td class="px-6 py-4">Useful to level up coding skills if you plan to go beyond
                                        library-based analysis / build custom data tools; often recommended before
                                        advanced
                                        data-science courses</td>
                                    <td class="px-6 py-4">Varies ‚Äî e.g. edX, Coursera courses; some paid certs</td>
                                    <td class="px-6 py-4">Many free / audit-available options via platforms like
                                        Coursera/edX</td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">‚ÄúIntroduction to
                                        Data
                                        Science‚Äù (Harvard Online / edX)</td>
                                    <td class="px-6 py-4">Covers Python in data science, basics of ML, data
                                        manipulation/visualization, foundational data-science workflows</td>
                                    <td class="px-6 py-4">Good academic-style overview: for learners wanting structured
                                        and
                                        rigorous context before diving deep</td>
                                    <td class="px-6 py-4">Paid certificate track via edX/Harvard</td>
                                    <td class="px-6 py-4">Free audit/self-study version often available</td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">‚ÄúData Science with
                                        Python‚Äù (MyGreatLearning, 2025 update)</td>
                                    <td class="px-6 py-4">Basic to intermediate data-science concepts with Python:
                                        statistics, data analysis, maybe ML depending on modules</td>
                                    <td class="px-6 py-4">Good free resource for learners in India or globally who
                                        prefer
                                        self-paced learning with no cost barrier</td>
                                    <td class="px-6 py-4">‚Äî</td>
                                    <td class="px-6 py-4">Free (with optional paid certificate) <a
                                            href="https://www.mygreatlearning.com/academy/learn-for-free/courses/data-science-with-python"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.mygreatlearning.com/academy/learn-for-free/courses/data-science-with-python</a>
                                    </td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Simplilearn ‚Äî Data
                                        Science with Python Course</td>
                                    <td class="px-6 py-4">Applied data-science tools and techniques in Python, possibly
                                        with
                                        coaching and structured curriculum</td>
                                    <td class="px-6 py-4">Useful for learners who want guided/live-session teaching
                                        rather
                                        than purely self-paced online courses</td>
                                    <td class="px-6 py-4">Paid via Simplilearn <a
                                            href="https://www.simplilearn.com/in/data-science-with-python-course"
                                            target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.simplilearn.com/in/data-science-with-python-course</a>
                                    </td>
                                    <td class="px-6 py-4">Sometimes there may be free previews or trial options</td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Dataquest ‚Äî
                                        Project-based Python & Data Science Paths</td>
                                    <td class="px-6 py-4">Real-world data tasks, Python + SQL + Excel/data-engineering +
                                        ML
                                        paths with project emphasis</td>
                                    <td class="px-6 py-4">Good for learning by doing realistic tasks: often closer to
                                        real
                                        job tasks rather than toy datasets</td>
                                    <td class="px-6 py-4">Paid subscription via Dataquest <a
                                            href="https://www.dataquest.io/" target="_blank"
                                            class="text-blue-600 hover:underline break-all">https://www.dataquest.io/</a>
                                    </td>
                                    <td class="px-6 py-4">Some initial free content or trial options depending on plan
                                    </td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">‚ÄúMachine Learning &
                                        AI
                                        Python‚Äù (via Harvard-offered course)</td>
                                    <td class="px-6 py-4">Python + ML basics + data science workflows + hands-on
                                        datasets,
                                        using common libraries like pandas, sklearn, etc.</td>
                                    <td class="px-6 py-4">Good if you want to get from data-analysis to ML models in an
                                        academic-style format</td>
                                    <td class="px-6 py-4">Paid enrollment or certificate track via Harvard Online / edX
                                    </td>
                                    <td class="px-6 py-4">Free audit / self-study often possible</td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">General ‚ÄúBest
                                        Python
                                        Courses‚Äù list (freeCodeCamp article)</td>
                                    <td class="px-6 py-4">Many courses covering from Python basics to data science and
                                        machine-learning recommended collectively; useful for picking based on interest
                                        or
                                        gap</td>
                                    <td class="px-6 py-4">Helpful if you want to assess multiple options and choose
                                        based on
                                        your prior knowledge and what you want to learn next</td>
                                    <td class="px-6 py-4">Varies by course (free or paid depending)</td>
                                    <td class="px-6 py-4">Many listed are free or have free tiers per article</td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">‚ÄúTop-10 Data
                                        Science
                                        Courses 2025‚Äù list (ClassCentral)</td>
                                    <td class="px-6 py-4">Aggregates many good courses across platforms and difficulty
                                        levels; useful for comparing offerings</td>
                                    <td class="px-6 py-4">Good for planning a learning path depending on your skill
                                        level,
                                        time availability, and budget</td>
                                    <td class="px-6 py-4">Varies per course in the list</td>
                                    <td class="px-6 py-4">Many have free audit / free versions per course description
                                    </td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">‚ÄúData Science /
                                        Data
                                        Engineering Combo‚Äù via DataCamp or Dataquest</td>
                                    <td class="px-6 py-4">Combines data-wrangling, pipelines, I/O, ML basics ‚Äî bridging
                                        data
                                        science and data engineering</td>
                                    <td class="px-6 py-4">Useful if you want to handle large data, build pipelines, and
                                        operate at scale rather than just small/clean datasets</td>
                                    <td class="px-6 py-4">Paid subscription / paid track</td>
                                    <td class="px-6 py-4">Some have trial or limited free content</td>
                                </tr>
                                <tr
                                    class="bg-white border-b dark:bg-slate-900 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">‚ÄúApplied ML + Data
                                        Analysis + Visualization Courses‚Äù (various)</td>
                                    <td class="px-6 py-4">Combine data-cleaning, EDA, statistical analysis,
                                        plotting/visualization, and basic modeling ‚Äî good for end-to-end projects</td>
                                    <td class="px-6 py-4">Good to build holistic project workflows from raw data to
                                        insight
                                        to model to report/visualization</td>
                                    <td class="px-6 py-4">Varies by course (Coursera, edX, bootcamps, etc.)</td>
                                    <td class="px-6 py-4">Varies: some paid, some free/audit ‚Äî check individual course
                                        pages
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="next-btn-container">
                        <button onclick="switchTopic('govdata')" class="prev-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Prev: Pipelines
                        </button>
                        <button onclick="switchTopic('roadmap')" class="next-btn">
                            Next: Roadmap
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <div id="progress-pill" class="progress-pill-container" style="display: none;">
            <button id="prog-prev" class="prog-btn" aria-label="Previous Topic">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M15 18l-6-6 6-6" />
                </svg>
            </button>

            <div class="progress-content">
                <span id="progress-text" class="progress-text">Topic 1 of 15</span>
                <div class="progress-track">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
            </div>

            <button id="prog-next" class="prog-btn" aria-label="Next Topic">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 18l6-6-6-6" />
                </svg>
            </button>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                // Robust initialisation: avoid null addEventListener errors
                let currentTopic = 'home';
                const charts = [];
                const navLinks = document.querySelectorAll('.nav-link') || [];
                const homeLink = document.getElementById('home-link');
                const getStartedBtn = document.getElementById('get-started-btn');
                const mainHeader = document.getElementById('main-header');
                const topicPanels = document.querySelectorAll('.topic-panel') || [];
                const menuBtn = document.getElementById('menu-btn');
                // Sidebar Toggle Logic
                const sidebarToggleBtn = document.getElementById('sidebar-toggle-btn');
                const body = document.body;

                if (sidebarToggleBtn) {
                    sidebarToggleBtn.addEventListener('click', () => {
                        body.classList.toggle('sidebar-collapsed');
                    });
                }

                // Mobile Menu Logic
                const closeMenuBtn = document.getElementById('close-menu');
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('overlay');
                const backToTopBtn = document.getElementById('back-to-top');
                const mainContent = document.getElementById('main-content');
                const desktopThemeToggle = document.getElementById('desktop-theme-toggle');
                const mobileThemeToggle = document.getElementById('mobile-theme-toggle');

                // Initialise theme from localStorage (persistence)
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    document.documentElement.classList.add('dark');
                    document.body.classList.add('dark');
                    document.querySelectorAll('.moon-icon').forEach(icon => icon.classList.add('hidden'));
                    document.querySelectorAll('.sun-icon').forEach(icon => icon.classList.remove('hidden'));
                } else {
                    document.documentElement.classList.remove('dark');
                    document.body.classList.remove('dark');
                    document.querySelectorAll('.sun-icon').forEach(icon => icon.classList.add('hidden'));
                    document.querySelectorAll('.moon-icon').forEach(icon => icon.classList.remove('hidden'));
                }

                // Helper to update Chart theme colours based on CSS vars
                function updateChartTheme() {
                    const isDark = document.body.classList.contains('dark');
                    const textColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-text').trim() || (isDark ? '#94a3b8' : '#64748b');
                    const gridColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-grid').trim() || (isDark ? '#333333' : '#e2e8f0');
                    Chart.defaults.color = textColor;
                    Chart.defaults.borderColor = gridColor;
                    charts.forEach(c => {
                        try {
                            if (c && c.options && c.options.scales) {
                                if (c.options.scales.x) {
                                    c.options.scales.x.ticks = c.options.scales.x.ticks || {};
                                    c.options.scales.x.ticks.color = textColor;
                                    c.options.scales.x.grid = c.options.scales.x.grid || {};
                                    c.options.scales.x.grid.color = gridColor;
                                }
                                if (c.options.scales.y) {
                                    c.options.scales.y.ticks = c.options.scales.y.ticks || {};
                                    c.options.scales.y.ticks.color = textColor;
                                    c.options.scales.y.grid = c.options.scales.y.grid || {};
                                    c.options.scales.y.grid.color = gridColor;
                                }
                            }
                            c.update();
                        } catch (e) { /* non-fatal */ }
                    });
                }

                // Dark mode toggle with persistence and AMOLED pure black
                function toggleDarkMode() {
                    // Toggle on both html and body so CSS variables defined on .dark are inherited correctly
                    document.documentElement.classList.toggle('dark');
                    document.body.classList.toggle('dark');
                    const isDark = document.documentElement.classList.contains('dark') || document.body.classList.contains('dark');
                    localStorage.setItem('theme', isDark ? 'dark' : 'light');
                    document.querySelectorAll('.moon-icon').forEach(icon => icon.classList.toggle('hidden', isDark));
                    document.querySelectorAll('.sun-icon').forEach(icon => icon.classList.toggle('hidden', !isDark));
                    updateChartTheme();
                }

                if (desktopThemeToggle) desktopThemeToggle.addEventListener('click', toggleDarkMode);
                if (mobileThemeToggle) mobileThemeToggle.addEventListener('click', toggleDarkMode);
                const homeThemeToggle = document.getElementById('home-theme-toggle');
                if (homeThemeToggle) homeThemeToggle.addEventListener('click', toggleDarkMode);

                // Mobile menu safely
                function toggleMenu() {
                    if (!sidebar || !overlay) return;
                    sidebar.classList.toggle('open');
                    overlay.classList.toggle('open');
                    overlay.classList.toggle('hidden');
                }
                if (menuBtn) menuBtn.addEventListener('click', toggleMenu);
                if (closeMenuBtn) closeMenuBtn.addEventListener('click', toggleMenu);
                if (overlay) overlay.addEventListener('click', toggleMenu);

                const progressPill = document.getElementById('progress-pill');
                const progressText = document.getElementById('progress-text');
                const progressFill = document.getElementById('progress-fill');
                const progPrev = document.getElementById('prog-prev');
                const progNext = document.getElementById('prog-next');
                let progressHideTimeout;

                // Ordered list of topics for progress tracking
                const progressTopics = [
                    'topic1', 'topic2', 'topic3', 'topic4',
                    'topic5', 'topic6', 'merging',
                    'topic8', 'topic9', 'topic10',
                    'viz', 'kendrick', 'grammy', 'govdata', 'roadmap'
                ];

                // Make switchTopic available, with smooth snapping behaviour
                window.switchTopic = function (targetTopic) {
                    if (!targetTopic || targetTopic === currentTopic) return;
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    if (targetTopic !== 'home') {
                        const activeLink = document.querySelector(`.nav-link[data-topic="${targetTopic}"]`);
                        if (activeLink) {
                            activeLink.classList.add('active');
                            // Scroll sidebar to keep active link in view
                            activeLink.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                        if (mainHeader) mainHeader.classList.remove('hidden');
                    } else {
                        if (mainHeader) mainHeader.classList.add('hidden');
                    }
                    topicPanels.forEach(panel => panel.classList.add('hidden'));
                    const el = document.getElementById(targetTopic);
                    if (el) {
                        el.classList.remove('hidden');
                        // snap main content to top of the revealed panel
                        if (mainContent) {
                            // Ensure the panel is visible then scroll
                            setTimeout(() => mainContent.scrollTo({ top: 0, behavior: 'smooth' }), 50);
                        }
                    }
                    currentTopic = targetTopic;
                    if (sidebar && sidebar.classList.contains('open')) toggleMenu();

                    // Update Progress Bar
                    const topicIndex = progressTopics.indexOf(targetTopic);
                    if (topicIndex !== -1) {
                        if (progressHideTimeout) clearTimeout(progressHideTimeout);
                        progressPill.style.display = ''; // Reset to CSS flex
                        // Force reflow
                        void progressPill.offsetWidth;
                        progressPill.classList.add('visible');

                        const currentStep = topicIndex + 1;
                        const totalSteps = progressTopics.length;
                        const percent = (currentStep / totalSteps) * 100;

                        progressText.textContent = `Topic ${currentStep} of ${totalSteps}`;
                        progressFill.style.width = `${percent}%`;

                        // Update buttons state
                        if (progPrev) progPrev.disabled = topicIndex === 0;
                        if (progNext) progNext.disabled = topicIndex === totalSteps - 1;
                    } else {
                        // Hide if not a main topic (e.g. home, faq, glossary)
                        progressPill.classList.remove('visible');
                        if (progressHideTimeout) clearTimeout(progressHideTimeout);
                        progressHideTimeout = setTimeout(() => {
                            progressPill.style.display = 'none';
                        }, 400);
                    }
                }

                // Progress Bar Button Listeners
                if (progPrev) {
                    progPrev.addEventListener('click', () => {
                        const currentIndex = progressTopics.indexOf(currentTopic);
                        if (currentIndex > 0) {
                            window.switchTopic(progressTopics[currentIndex - 1]);
                        }
                    });
                }

                if (progNext) {
                    progNext.addEventListener('click', () => {
                        const currentIndex = progressTopics.indexOf(currentTopic);
                        if (currentIndex !== -1 && currentIndex < progressTopics.length - 1) {
                            window.switchTopic(progressTopics[currentIndex + 1]);
                        }
                    });
                }

                // Safe event wiring for nav links and buttons
                navLinks.forEach(link => {
                    if (!link) return;
                    link.addEventListener('click', (e) => { e.preventDefault(); const t = link.dataset.topic; if (t) window.switchTopic(t); });
                });
                if (homeLink) homeLink.addEventListener('click', (e) => { e.preventDefault(); window.switchTopic('home'); });
                if (getStartedBtn) getStartedBtn.addEventListener('click', () => window.switchTopic('topic1'));
                if (backToTopBtn) backToTopBtn.addEventListener('click', () => { if (mainContent) mainContent.scrollTo({ top: 0, behavior: 'smooth' }); });

                // Copy buttons (modern + fallback)
                document.querySelectorAll('.copy-btn').forEach(btn => {
                    // accessibility
                    btn.setAttribute('aria-label', 'Copy code to clipboard');
                    btn.setAttribute('role', 'button');
                    btn.addEventListener('click', () => {
                        const pre = btn.nextElementSibling;
                        if (!pre) return;
                        const code = pre.innerText;
                        if (navigator.clipboard && navigator.clipboard.writeText) {
                            navigator.clipboard.writeText(code).then(() => {
                                const original = btn.innerText;
                                btn.innerText = 'Copied!';
                                setTimeout(() => btn.innerText = original, 1500);
                            }).catch(() => { });
                        } else {
                            const ta = document.createElement('textarea'); ta.value = code; ta.style.position = 'fixed'; ta.style.opacity = '0'; document.body.appendChild(ta); ta.select(); try { document.execCommand('copy'); } catch (e) { } document.body.removeChild(ta);
                        }
                    });
                });

                // Chart helper: create only if canvas exists and push to charts[]
                function createChartIfCanvas(id, config) {
                    const el = document.getElementById(id);
                    if (!el) return null;
                    const ctx = el.getContext ? el.getContext('2d') : null;
                    if (!ctx) return null;
                    try { const c = new Chart(ctx, config); charts.push(c); return c; } catch (e) { console.error('Chart error', id, e); return null; }
                }

                // Apply theme to charts
                updateChartTheme();

                // Initial chart creations (safe)
                createChartIfCanvas('weoChart', {
                    type: 'scatter',
                    data: { datasets: [{ label: 'Countries (2023)', data: [{ x: 7.2, y: 5.4 }, { x: 2.1, y: 3.2 }, { x: 5.2, y: 0.2 }, { x: -0.3, y: 6.1 }], backgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--accent-color') || '#2563eb' }] },
                    options: { responsive: true, maintainAspectRatio: false, scales: { x: { title: { display: true, text: 'GDP Growth (%)' } }, y: { title: { display: true, text: 'Inflation (%)' } } }, plugins: { title: { display: true, text: 'Phillips Curve Analysis' } } }
                });

                createChartIfCanvas('tradeChart', {
                    type: 'bar', data: { labels: ['China', 'India'], datasets: [{ label: 'Pharma', data: [20, 50], backgroundColor: '#ef4444' }, { label: 'Tech', data: [500, 200], backgroundColor: '#3b82f6' }] },
                    options: { responsive: true, maintainAspectRatio: false, scales: { x: { stacked: true }, y: { stacked: true, title: { display: true, text: 'Value (Billions)' } } }, plugins: { title: { display: true, text: 'Trade Matrix: Sectoral Composition' } } }
                });

                createChartIfCanvas('timeSeriesChart', {
                    type: 'line', data: { labels: ['2020', '2021', '2022', '2023'], datasets: [{ label: 'GDP (Trillion USD)', data: [2.5, 3.0, 3.2, 3.7], borderColor: '#4f46e5', tension: 0.3 }] }, options: { responsive: true, maintainAspectRatio: false }
                });

                createChartIfCanvas('kendrickChart', {
                    type: 'line', data: { labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14'], datasets: [{ label: 'Forward (Wickedness)', data: [null, null, 50, 70, 50, 56, 40, 56, 46, 56, 55, 38, 42, null], borderColor: '#2563eb', tension: 0.4, fill: false }, { label: 'Reverse (Weakness)', data: [null, null, 33, 48, 38, 58, 68, 56, 56, 56, 73, 53, 48, null], borderColor: '#dc2626', tension: 0.4, fill: false }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: 'Narrative Arc Analysis: Rolling Avg Sentiment' }, tooltip: { mode: 'index', intersect: false } }, scales: { y: { title: { display: true, text: 'Aggression Score (Smoothed)' }, min: 0, max: 100 } } }
                });

                createChartIfCanvas('grammyChart', {
                    type: 'bubble', data: { datasets: [{ label: 'Pop (Taylor, Adele)', data: [{ x: 50, y: 85, r: 14 }, { x: 25, y: 80, r: 16 }, { x: 22, y: 78, r: 3 }], backgroundColor: 'rgba(236,72,153,0.7)', borderColor: 'rgba(236,72,153,1)' }, { label: 'R&B / Hip-Hop (Bey, Kendrick)', data: [{ x: 35, y: 88, r: 32 }, { x: 20, y: 94, r: 17 }], backgroundColor: 'rgba(59,130,246,0.7)', borderColor: 'rgba(59,130,246,1)' }, { label: 'Alt (Billie)', data: [{ x: 28, y: 86, r: 9 }], backgroundColor: 'rgba(16,185,129,0.7)', borderColor: 'rgba(16,185,129,1)' }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: 'Commercial Success vs Critical Acclaim (Size = Wins)' }, tooltip: { callbacks: { label: function (context) { return context.dataset.label + ': Streams ' + context.raw.x + 'B, Score ' + context.raw.y; } } } }, scales: { x: { title: { display: true, text: 'Global Streams (Billions)' }, min: 10, max: 60 }, y: { title: { display: true, text: 'Metacritic Score' }, min: 70, max: 100 } } }
                });

                // Additional Grammy Capstone charts (safely created)
                createChartIfCanvas('grammyEvolutionChart', {
                    type: 'line',
                    data: {
                        labels: [2018, 2019, 2020, 2021, 2022],
                        datasets: [
                            { label: 'Pop', data: [30, 35, 40, 45, 50], backgroundColor: 'rgba(236,72,153,0.4)', borderColor: 'rgba(236,72,153,1)', fill: true, stack: 'streams' },
                            { label: 'R&B', data: [20, 22, 24, 26, 28], backgroundColor: 'rgba(59,130,246,0.4)', borderColor: 'rgba(59,130,246,1)', fill: true, stack: 'streams' },
                            { label: 'Hip-Hop', data: [15, 18, 22, 25, 27], backgroundColor: 'rgba(99,102,241,0.4)', borderColor: 'rgba(99,102,241,1)', fill: true, stack: 'streams' },
                            { label: 'Alt', data: [8, 10, 12, 14, 16], backgroundColor: 'rgba(16,185,129,0.4)', borderColor: 'rgba(16,185,129,1)', fill: true, stack: 'streams' }
                        ]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: 'Streams Evolution by Genre (Stacked Area)' } }, scales: { y: { stacked: true, title: { display: true, text: 'Streams (Relative Units)' } }, x: { title: { display: true, text: 'Year' } } } }
                });

                createChartIfCanvas('grammyScatterChart', {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            label: 'Artist Win Efficiency (wins per B streams)',
                            data: [
                                { x: 35, y: (32 / 35) * 100, r: 8, artist: 'Beyonc√©' },
                                { x: 50, y: (14 / 50) * 100, r: 6, artist: 'Taylor Swift' },
                                { x: 20, y: (17 / 20) * 100, r: 7, artist: 'Kendrick Lamar' },
                                { x: 25, y: (16 / 25) * 100, r: 6, artist: 'Adele' },
                                { x: 28, y: (9 / 28) * 100, r: 4, artist: 'Billie Eilish' },
                                { x: 22, y: (3 / 22) * 100, r: 2, artist: 'Harry Styles' }
                            ],
                            backgroundColor: ['rgba(236,72,153,0.9)', 'rgba(59,130,246,0.9)', 'rgba(99,102,241,0.9)', 'rgba(249,115,22,0.9)', 'rgba(16,185,129,0.9)', 'rgba(94,234,212,0.9)']
                        }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: 'Win Efficiency: Grammy Wins per Billion Streams' }, tooltip: { callbacks: { label: function (ctx) { const r = ctx.raw; return `${r.artist || ''}: ${r.x}B streams ‚Äî Efficiency ${(r.y).toFixed(2)} (wins per 100B)`; } } } }, scales: { x: { title: { display: true, text: 'Global Streams (Billions)' } }, y: { title: { display: true, text: 'Wins per 100B (scaled)' } } } }
                });

                createChartIfCanvas('grammyBig4Chart', {
                    type: 'bar',
                    data: { labels: ['Beyonc√©', 'Taylor Swift', 'Kendrick Lamar', 'Adele', 'Billie Eilish', 'Harry Styles'], datasets: [{ label: 'Big 4 Wins', data: [4, 2, 3, 3, 1, 0], backgroundColor: ['#2563eb', '#ec4899', '#6366f1', '#f97316', '#10b981', '#06b6d4'] }] },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: 'Big 4 Dominance (Sample Counts)' } }, scales: { y: { beginAtZero: true, title: { display: true, text: 'Wins' } } } }
                });

                createChartIfCanvas('grammyPolarChart', {
                    type: 'polarArea',
                    data: { labels: ['Pop', 'R&B', 'Hip-Hop', 'Alt'], datasets: [{ data: [45, 25, 20, 10], backgroundColor: ['rgba(236,72,153,0.85)', 'rgba(59,130,246,0.85)', 'rgba(99,102,241,0.85)', 'rgba(16,185,129,0.85)'] }] },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: 'Genre Share (Polar Area)' } } }
                });

                // --- Grammy CSV parsing and live update functions ---
                function getChartById(id) {
                    const el = document.getElementById(id);
                    if (!el) return null;
                    if (typeof Chart !== 'undefined' && Chart.getChart) {
                        try { return Chart.getChart(el) || null; } catch (e) { /* ignore */ }
                    }
                    // fallback search in charts[]
                    for (const c of charts) {
                        try { if (c && c.canvas && c.canvas.id === id) return c; } catch (e) { }
                    }
                    return null;
                }

                function setGrammyLog(msg, isError) {
                    const log = document.getElementById('grammyUploadLog');
                    if (!log) return;
                    log.innerText = msg;
                    log.style.color = isError ? '#dc2626' : ''; // red for errors
                }

                function parseGrammyCSV(file) {
                    if (!file) { setGrammyLog('No file selected.', true); return; }
                    setGrammyLog('Parsing file ‚Äî this may take a moment...');
                    if (window.Papa && Papa.parse) {
                        Papa.parse(file, {
                            header: true,
                            dynamicTyping: true,
                            skipEmptyLines: true,
                            complete: function (results) {
                                if (!results || !results.data || !results.data.length) {
                                    setGrammyLog('No records found in the CSV.', true);
                                    return;
                                }
                                setGrammyLog('Parsed ' + results.data.length + ' rows. Processing...');
                                try { processGrammyData(results.data); setGrammyLog('Charts updated from uploaded CSV.'); } catch (e) { console.error(e); setGrammyLog('Error processing CSV: ' + (e.message || e), true); }
                            },
                            error: function (err) { setGrammyLog('Parsing error: ' + err.message, true); }
                        });
                    } else {
                        setGrammyLog('CSV parser (PapaParse) not loaded.', true);
                    }
                }

                function processGrammyData(rows) {
                    if (!Array.isArray(rows) || rows.length === 0) throw new Error('Empty data');
                    const sample = rows[0];
                    const keys = Object.keys(sample).map(k => k.trim());
                    const lower = k => k && k.toLowerCase();

                    // Heuristic column detection
                    const yearKey = keys.find(k => /year|award_?year|award_year/i.test(k)) || keys.find(k => /date/i.test(k));
                    const categoryKey = keys.find(k => /category|award/i.test(k));
                    const artistKey = keys.find(k => /artist|performer|name/i.test(k));
                    const winnerKey = keys.find(k => /winner|result|is_winner|won/i.test(k));
                    const genreKey = keys.find(k => /genre/i.test(k));

                    // Build normalized rows
                    const normalized = rows.map(r => {
                        const year = yearKey ? (r[yearKey] || r[yearKey.trim()]) : undefined;
                        const category = categoryKey ? (r[categoryKey] || r[categoryKey.trim()]) : undefined;
                        const artist = artistKey ? (r[artistKey] || r[artistKey.trim()]) : undefined;
                        const genre = genreKey ? (r[genreKey] || r[genreKey.trim()]) : undefined;
                        const winnerRaw = winnerKey ? (r[winnerKey] || r[winnerKey.trim()]) : undefined;
                        const isWinner = (winnerRaw === true) || (String(winnerRaw).toLowerCase().indexOf('win') !== -1) || (String(winnerRaw).toLowerCase().indexOf('winner') !== -1) || (String(winnerRaw).toLowerCase().indexOf('yes') !== -1) || (String(winnerRaw).trim() === '1');
                        return { year: year, category: category, artist: artist, genre: genre, winner: !!isWinner };
                    });

                    // 1) Genre / Category share (for polar chart)
                    const genreCounts = {};
                    normalized.forEach(r => {
                        const g = r.genre || r.category || 'Unknown';
                        genreCounts[g] = (genreCounts[g] || 0) + 1;
                    });
                    const polarLabels = Object.keys(genreCounts).slice(0, 8);
                    const polarData = polarLabels.map(l => genreCounts[l]);

                    const polarChart = getChartById('grammyPolarChart');
                    if (polarChart) {
                        polarChart.data.labels = polarLabels;
                        polarChart.data.datasets = [{ data: polarData, backgroundColor: polarLabels.map((_, i) => polarChart.data.datasets && polarChart.data.datasets[0] && polarChart.data.datasets[0].backgroundColor ? polarChart.data.datasets[0].backgroundColor[i % polarChart.data.datasets[0].backgroundColor.length] : ['#ec4899', '#3b82f6', '#6366f1', '#10b981'][i % 4]) }];
                        try { polarChart.update(); } catch (e) {/*non-fatal*/ }
                    }

                    // 2) Evolution by year and genre (stacked area)
                    const byYearGenre = {};
                    normalized.forEach(r => {
                        const y = Number(r.year) || (new Date(r.year || '').getFullYear()) || 'Unknown';
                        const g = r.genre || r.category || 'Unknown';
                        byYearGenre[y] = byYearGenre[y] || {};
                        byYearGenre[y][g] = (byYearGenre[y][g] || 0) + 1;
                    });
                    const years = Object.keys(byYearGenre).filter(y => y !== 'Unknown').map(y => Number(y)).sort((a, b) => a - b);
                    const genreSet = new Set();
                    years.forEach(y => { Object.keys(byYearGenre[y]).forEach(g => genreSet.add(g)); });
                    const genres = Array.from(genreSet).slice(0, 6);
                    const evolutionDatasets = genres.map((g, idx) => ({ label: g, data: years.map(y => byYearGenre[y][g] || 0), backgroundColor: `hsla(${(idx * 60) % 360},70%,60%,0.35)`, borderColor: `hsl(${(idx * 60) % 360},70%,45%)`, fill: true, stack: 'streams' }));
                    const evoChart = getChartById('grammyEvolutionChart');
                    if (evoChart) {
                        evoChart.data.labels = years.map(String);
                        evoChart.data.datasets = evolutionDatasets;
                        try { evoChart.update(); } catch (e) { }
                    }

                    // 3) Win efficiency scatter (wins per nominations or wins per year-normalised)
                    const artistStats = {};
                    normalized.forEach(r => {
                        const a = r.artist || 'Unknown Artist';
                        artistStats[a] = artistStats[a] || { wins: 0, noms: 0 };
                        artistStats[a].noms += 1;
                        if (r.winner) artistStats[a].wins += 1;
                    });
                    const scatterPoints = Object.keys(artistStats).slice(0, 50).map((a, i) => {
                        const s = artistStats[a];
                        const efficiency = s.noms ? (s.wins / s.noms) * 100 : 0; // wins per 100 nominations
                        return { x: Math.max(1, Math.round(s.noms / 2)), y: efficiency, r: Math.min(40, Math.max(4, s.wins * 3)), artist: a };
                    });
                    const scatterChart = getChartById('grammyScatterChart');
                    if (scatterChart) {
                        scatterChart.data.datasets = [{ label: 'Win Efficiency (wins per 100 nominations)', data: scatterPoints, backgroundColor: scatterChart.data.datasets && scatterChart.data.datasets[0] && scatterChart.data.datasets[0].backgroundColor || 'rgba(59,130,246,0.9)' }];
                        try { scatterChart.update(); } catch (e) { }
                    }

                    // 4) Big 4 counts per artist (sample) ‚Äî filter categories
                    const big4 = ['Record of the Year', 'Album of the Year', 'Song of the Year', 'Best New Artist'];
                    const big4Counts = {};
                    normalized.forEach(r => {
                        const cat = (r.category || '').toString();
                        if (big4.some(b => cat.toLowerCase().indexOf(b.toLowerCase()) !== -1)) {
                            const a = r.artist || 'Unknown';
                            big4Counts[a] = (big4Counts[a] || 0) + (r.winner ? 1 : 0);
                        }
                    });
                    const big4Labels = Object.keys(big4Counts).slice(0, 6);
                    const big4Data = big4Labels.map(l => big4Counts[l] || 0);
                    const big4Chart = getChartById('grammyBig4Chart');
                    if (big4Chart) {
                        big4Chart.data.labels = big4Labels.length ? big4Labels : big4Chart.data.labels;
                        big4Chart.data.datasets = [{ label: 'Big 4 Wins', data: big4Data.length ? big4Data : big4Chart.data.datasets && big4Chart.data.datasets[0] && big4Chart.data.datasets[0].data || big4Chart.data.datasets[0].data, backgroundColor: big4Chart.data.datasets && big4Chart.data.datasets[0] && big4Chart.data.datasets[0].backgroundColor }];
                        try { big4Chart.update(); } catch (e) { }
                    }
                }

                // Wire file input
                const grammyInput = document.getElementById('grammyDatasetInput');
                if (grammyInput) {
                    grammyInput.addEventListener('change', (ev) => {
                        const f = ev.target.files && ev.target.files[0];
                        parseGrammyCSV(f);
                    });
                }

                // Simple slideshow for Kendrick section (automated)
                /*
                (function setupKendrickSlideshow() {
                    const kendrickEl = document.getElementById('kendrick');
                    if (!kendrickEl) return;
                    const container = kendrickEl.querySelector('.mb-8.flex');
                    if (!container) return;
                    container.innerHTML = `\n      <div id="kendrick-slideshow" class="w-full relative">\n        <img src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?auto=format&fit=crop&w=1200&q=80" alt="Music Concert Stage" class="kendrick-slide w-full h-64 object-cover rounded-2xl mb-8 shadow-sm" />\n        <img src="https://images.unsplash.com/photo-1509099836639-18ba0c5b6d4c?auto=format&fit=crop&w=1200&q=80" alt="Crowd" class="kendrick-slide hidden w-full h-64 object-cover rounded-2xl mb-8 shadow-sm" />\n        <img src="https://images.unsplash.com/photo-1508609349937-5ec4ae374ebf?auto=format&fit=crop&w=1200&q=80" alt="Stage Lights" class="kendrick-slide hidden w-full h-64 object-cover rounded-2xl mb-8 shadow-sm" />\n      </div>\n    `;
                    const slides = container.querySelectorAll('.kendrick-slide');
                    let idx = 0;
                    setInterval(() => { slides[idx].classList.add('hidden'); idx = (idx + 1) % slides.length; slides[idx].classList.remove('hidden'); }, 4000);
                })();
                */

                // Ensure initial theme applied to charts
                updateChartTheme();

                // Attempt to fetch server-provided Grammy payload (if a local server is running)
                (function tryFetchGrammyPayload() {
                    const endpoint = '/api/grammy';
                    // Only attempt when window.fetch is available
                    if (!window.fetch) return;
                    fetch(endpoint, { cache: 'no-store' }).then(r => {
                        if (!r.ok) throw new Error('No server payload');
                        return r.json();
                    }).then(payload => {
                        if (!payload) return;
                        setGrammyLog('Loaded live payload from /api/grammy');
                        try {
                            applyGrammyPayload(payload);
                            setTimeout(() => setGrammyLog('Charts updated from server payload.'), 120);
                        } catch (e) { setGrammyLog('Error applying server payload: ' + (e.message || e), true); }
                    }).catch(() => { setGrammyLog('Server not detected. Using pre-loaded sample data.'); });
                })();

                // Apply a server-side precomputed payload into existing charts
                function applyGrammyPayload(payload) {
                    if (!payload) return;
                    try {
                        // Polar
                        const polarChart = getChartById('grammyPolarChart');
                        if (polarChart && payload.polar) {
                            polarChart.data.labels = payload.polar.labels || polarChart.data.labels;
                            polarChart.data.datasets = [{ data: payload.polar.data || [], backgroundColor: polarChart.data.datasets && polarChart.data.datasets[0] && polarChart.data.datasets[0].backgroundColor || ['#ec4899', '#3b82f6', '#6366f1', '#10b981'] }];
                            polarChart.update();
                        }

                        // Evolution
                        const evoChart = getChartById('grammyEvolutionChart');
                        if (evoChart && payload.evolution) {
                            evoChart.data.labels = payload.evolution.labels || evoChart.data.labels;
                            evoChart.data.datasets = payload.evolution.datasets || evoChart.data.datasets;
                            evoChart.update();
                        }

                        // Scatter
                        const sChart = getChartById('grammyScatterChart');
                        if (sChart && payload.scatter) {
                            sChart.data.datasets = payload.scatter.datasets || sChart.data.datasets;
                            sChart.update();
                        }

                        // Big4
                        const bChart = getChartById('grammyBig4Chart');
                        if (bChart && payload.big4) {
                            bChart.data.labels = payload.big4.labels && payload.big4.labels.length ? payload.big4.labels : bChart.data.labels;
                            bChart.data.datasets = [{ label: 'Big 4 Wins', data: payload.big4.data || bChart.data.datasets[0].data, backgroundColor: bChart.data.datasets && bChart.data.datasets[0] && bChart.data.datasets[0].backgroundColor }];
                            bChart.update();
                        }
                    } catch (e) { console.error('applyGrammyPayload error', e); throw e; }
                }

            });
        </script>


</body>

</html>
